// *** VALUES USED *** \\
// /SaveValue $GetPlayerInfo(#Source, PSID)&"_Stats", "$500/0|0\0X0@0#0!0*0%lemmein28&"
// /SaveValue $GetPlayerInfo(#Source, PSID)&"_Clauses", "1/0/Move: 86/Pokemon: 252/"
//
// "$Money/Achievement Points|Battle Points\Streak+Guild@Guild Rank#Job Level!Muted*Authority%Password&"
// "Battle Timeout/Challenge Cup/Move: 86/Pokemon: 252/"
// 
// Money --   	$Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1), x)
// 
// Achievement Points -- 	$Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1), x)
// 
// Battle Points -- 	$Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1), x)
// 
// Streak --	 	$Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1), x)
// 
// Guild --	 	$Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1), x)
// 
// Guild Rank --	 	$Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1), x)
// 
// Job Level --	 	$Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1), x)
// 
// Muted --	 	$Mid($Temp, #IsIn($Temp, "!") + 1, (#IsIn($Temp, "*") - #IsIn($Temp, "!")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "!") + 1, (#IsIn($Temp, "*") - #IsIn($Temp, "!")) - 1), x)
// 
// Authority --	 	$Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1), x)
// 
// Password --	 	$Mid($Temp, #IsIn($Temp, "%") + 1, (#IsIn($Temp, "&") - #IsIn($Temp, "%")) - 1)
// /Set $Temp, $Replace($Temp, $Mid($Temp, #IsIn($Temp, "%") + 1, (#IsIn($Temp, "&") - #IsIn($Temp, "%")) - 1), x)

Event -NewMessage
/Clear

If #IsIn($Message, "Registry connection closed") = 1 OR #IsIn($Message, "Lost connection to registry") = 1
If #PNumber("Steve") > 0
/SendPM #PNumber("Steve"), $Bot & "Kirby's Casino server registry has been lost."
EndIf
EndIf
If #IsIn($Message, "Registry log-on completed") = 1
If #PNumber("Steve") > 0
/SendPM #PNumber("Steve"), $Bot & "Kirby's Casino server registry connection has returned."
EndIf
EndIf

If #IsIn($Message, "Registry connection closed") = 1 OR #IsIn($Message, "Lost connection to registry") = 1
If #PNumber("Steve") > 0
/SendPM #PNumber("Steve"), $Bot & "Kirby's Casino server registry has been lost."
EndIf
EndIf
If #IsIn($Message, "Registry log-on completed") = 1
If #PNumber("Steve") > 0
/SendPM #PNumber("Steve"), $Bot & "Kirby's Casino server registry connection has returned."
EndIf
EndIf

EndEvent

Event -PlayerSignOff
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "Logged In", "Logged Out")
EndEvent

Event -PlayerSignOn
//Anti SpamBot Script
If #Len($Name(#Source)) > 19
/Set #Temp, 0
/Set #TempA, 64
:Spammer
/Inc #TempA
If #IsIn($Name(#Source), $Chr(#TempA)) = 1
/Inc #Temp
If #TempA = 90
GoTo SpamBot
Else
GoTo Spammer
EndIf
Else
If #TempA = 90
GoTo SpamBot
Else
GoTo Spammer
EndIf
EndIf
EndIf
If $GetPlayerInfo(#Source, PSID) = "C1111111OJQPVD6SIUTLW"
/Set #Temp, 0
GoTo SpamBot
EndIf
///If $Left($GetPlayerInfo(#Source, IPAD), 3) = "69."
////Kick #Source
///EndIf
GoTo SkipSpam
:SpamBot
If #Temp = 0 AND $GetPlayerInfo(#Source, PSID) = "C1111111OJQPVD6SIUTLW"
/SendAll $Bot & "I just detected a spambot, and took the liberty of banning the IP of the offender."
/SendAll $Bot & "This is the IP I just banned: " & $GetPlayerInfo(#Source, IPAD)
/Ban #Source
EndIf
:SkipSpam

If $Name(#Source) = ""
/SendAll $Bot & "Someone just attempted to ghost and was IP Banned."
/Ban #Source
/Exit
EndIf
EndEvent

Event +PlayerSignOn

//User Authentication Check
If $GetValue("_PSID_" &$Name(#Source)) = ""
/SaveValue "_PSID_"&$Name(#Source), $GetPlayerInfo(#Source, PSID)
Goto SkipUserAuthentication
EndIf
If $GetValue("_PSID_" &$Name(#Source)) <> $GetPlayerInfo(#Source, PSID)
/SendPM #Source, $Bot & "The username/alias of '"&$Name(#Source)&"' has already been taken by someone on another computer."
/SendPM #Source, $Bot & "Please use a different name to sign onto the server."
/SendPM #Source, $Bot & "If you need the username transferred to another computer, please Private Message Blue Kirby and he will take care of it for you."
/SendAll $Bot & "Someone tried to sign on as '" & $Name(#Source) & "' on another computer. This user has been removed."
/Kick #Source
Goto SkipUserAuthentication
EndIf
:SkipUserAuthentication

/Inc #Packet(#Source)
If #Packet(#Source) > 1
/SendAll $Bot & "Someone attempted to packet hack under the name '" & $Name(#Source) & "'. This person has been IP banned."
/Ban #Source
/Exit
EndIf

//Makes sure Authority must log in before using their powers.
/SetPlayerInfo #Source, AUTH, 0

If $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats") = ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", "$500/0|0\0X0@1#0!0*0%Y& || CC: On"
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CMoves", "/" 
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CItems", "/"
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CPokes", "/"
EndIf

//Welcome Message
/SendPM #Source, ""
/SendPM #Source, $Bot & $Name(#Source) & ", we welcome to the revamped Kirby's Casino Version 3."
/SendPM #Source, $Bot & "The commands list can be accessed with !Commands or /Commands."
/SendPM #Source, $Bot & "To see what's new in the latest release of the Casino, type !WhatsNew or /WhatsNew."
/SendPM #Source, ""
/SendPM #Source, $Bot & "Server IP/Advanced Connect - " & $Adv
/SendPM #Source, $Bot & "Please visit our forum - http://kirbyscasino.ipbfree.com"
/SendPM #Source, ""

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")

If $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1) <> "0"
/SendPM #Source, $Bot & "The server has recognised you as an authority figure. Type !Identify <password> to log in."
/SendPM #Source, ""
EndIf

//[ Coins: <888888> ] [ Job Level: <8> ] [ Streak: <888> ]
//[ Achievements: <888888> ] [ Battle Points: <888888> ]
//[ Guild: <Cyclone> ] [ Rank: <10/10> ] [ Auth: <6/6> ]

/Set $TempA, $Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1)
/Set $TempB, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
/Set $TempC, $Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1)
/Set $TempD, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
/Set $TempE, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
/Set $TempF, $GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")
/Set $TempG, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)
/Set $TempH, $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)
/SetPlayerInfo #Source, EXTR, "[ Coins: <" & $TempA & "> ] [ Job Level: <" & $TempB & "> ] [ Streak: <" & $TempC & "> ] " & $Chr(10) & "[ Achievements: <" & $TempD & "> ] [ Battle Points: <" & $TempE & "> ]" & $Chr(10) & "[ Guild: <" & $TempF & "> ] [ Rank: <" & $TempG & "/10> ] [ Auth: <" & $TempH & "/6> ]"
/Unset $Temp
/Unset $TempA
/Unset $TempB
/Unset $TempC
/Unset $TempD
/Unset $TempE
/Unset $TempF
/Unset $TempG
/Unset $TempH

EndEvent

Event +TeamChange

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))

If #IsIn($Temp, "Logged In") > 0
If #A = 2 OR #A = 3
/SetPlayerInfo #Source, AUTH, 1
EndIf
If #A > 3
/SetPlayerInfo #Source, AUTH, 2
EndIf
Else
/SetPlayerInfo #Source, AUTH, 0
EndIf

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set $TempA, $Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1)
/Set $TempB, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
/Set $TempC, $Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1)
/Set $TempD, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
/Set $TempE, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
/Set $TempF, $GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")
/Set $TempG, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)
/Set $TempH, $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)
/SetPlayerInfo #Source, EXTR, "[ Coins: <" & $TempA & "> ] [ Job Level: <" & $TempB & "> ] [ Streak: <" & $TempC & "> ] " & $Chr(10) & "[ Achievements: <" & $TempD & "> ] [ Battle Points: <" & $TempE & "> ]" & $Chr(10) & "[ Guild: <" & $TempF & "> ] [ Rank: <" & $TempG & "/10> ] [ Auth: <" & $TempH & "/6> ]"
/Unset $Temp
/Unset $TempA
/Unset $TempB
/Unset $TempC
/Unset $TempD
/Unset $TempE
/Unset $TempF
/Unset $TempG
/Unset $TempH

EndEvent

Event -ChatMessage

/Set $Z, $Left($Message, 1)
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If $Z <> "!" AND $Z <> "/" AND #Val($Mid($Temp, #IsIn($Temp, "!") + 1, (#IsIn($Temp, "*") - #IsIn($Temp, "!")) - 1)) > 0
If $Z = "*"
If #IsIn($Message, "***") = 1
/StopEvent
/SendPM #Source, $Bot & "Trying to get past your mute? Nice try, but I don't think so!"
/Kick #Source
/Exit
EndIf
EndIf
/StopEvent
/Exit
EndIf
If $Z <> "!" AND $Z <> "/" AND #Getvalue("Muteall") = 1 AND #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)) < #Getvalue("Muteall_auth") 
/Stopevent
/SendPM #Source, $Bot & "Sorry, massmute is in effect, so you can't talk!"
/? $Name(#Source) & " " & $Message & " (Massmute prevented this message))"
/Exit
EndIf
If $Z = "!" OR $Z = "/"
// If #CmdMuted(#Source) > 0
// /StopEvent
// /SendPM #Source, $Bot & "Sorry, you are command muted, and cannot use casino commands as a result!"
// /Exit
// EndIf
GoTo Scripts
Else
/Exit
:Scripts
/Set $A, $Right($Message, #Len($Message) - 1)
If #IsIn($Message, " ") > 0
/Set $A, $Left($A, #IsIn($A, " ") - 1)
EndIf
/Set $B, ""
If #Len($Message) > #Len($A) + 2
/Set $B, $Right($Message, #Len($Message) - #Len($A) - 2)
EndIf
/Set #C, #PNumber($B)
If $A = "" OR $A = " "
/Exit
EndIf
/StopEvent
/Unset $Temp

If $A = "SetVariables"
If $GetPlayerInfo(#Source, PSID) = "JPEMU8BSJI585HT6O5GUH"
/Set $Bot, "<+Casino-Bot>: "
/Set $Adv, "kirbyscasino.servegame.org"
/Set #KC, 1
/SetPA $Game
/SetPA $GameData
/SetPA $Phase
/SetPA #Packet
//SaveValue "__Clan_0_Name", "None"
//SaveValue "__Clan_1_Name", "Cyclone"
//SaveValue "__Clan_2_Name", "Eruption"
//SaveValue "__Clan_3_Name", "Tsunami"
//SaveValue "__CycloneMembers", 0
//SaveValue "__CycloneMembers", 0
//SaveValue "__CycloneMembers", 0
//SaveValue "__CycloneWins", 0
//SaveValue "__CycloneLosses", 0
//SaveValue "__CyclonePoints", 0
//SaveValue "__TsunamiMembers", 0
//SaveValue "__TsunamiWins", 0
//SaveValue "__TsunamiLosses", 0
//SaveValue "__TsunamiPoints", 0
//SaveValue "__EruptionMembers", 0
//SaveValue "__EruptionWins", 0
//SaveValue "__EruptionLosses", 0
//SaveValue "__EruptionPoints", 0
/SendAll "*** -============================================================================-   ***"
/SendAll "***                                                  *** Kirby's Casino - Now Operational! ***                                              ***"
/SendAll $Bot & "The Casino variables have just all been established and set by " & $Name(#Source) &"."
/SendAll $Bot & "The server is now fully operational!"
/SendAll "*** -============================================================================-   ***"
/Exit
Else
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have the authority to be messing with this command!"
/SendPM #Source, ""
/Exit
EndIf
EndIf

If $A = "WhatsNew"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                  *** Kirby's Casino - What's New to V3 ***                                             ***"
/SendPM #Source, $Bot & "So, for all the trouble that Blue Kirby went to in order to release V3, what's actually new?"
/SendPM #Source, ""
/SendPM #Source, " - A guild system. New to KCv3, players can join guilds and fight together. Check !GuildCmds for more."
/SendPM #Source, " - A custom ranking system. !HallOfFame commemorates exceptional achievements of players."
/SendPM #Source, " - Revamped battle commands. You can now set your own clauses. Check !BattleCmds for more."
/SendPM #Source, " - Upgradable games. In the new KCv3 shop, you can 'upgrade' the games to deal greater prizes."
/SendPM #Source, " - A use for your coins. You can now convert your coins to Achievement Points in the KCv3 shop."
/SendPM #Source, " - More secure data. If the server ever crashes, your personal account data is guaranteed to be safe."
/SendPM #Source, ""
/SendPM #Source, $Bot & "Of course, this just skims the surface. Start playing to uncover everything for yourself! Enjoy!"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Exit
EndIf

If $A = "Commands"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                     *** Kirby's Casino - Command List ***                                                ***"
/SendPM #Source, $Bot & "The following commands can be typed with either ! or / preceding the command itself."
/SendPM #Source, ""
/SendPM #Source, "!HallOfFame: This command commemorates exceptional achievements of players on the server."
/SendPM #Source, "!GuildCmds: Use this to display the relevant guild commands new to KCv3."
/SendPM #Source, "!BattleCmds: Use this to display the revamped battle option commands new to KCv3."
/SendPM #Source, "!TournCmds: Use this to display the revamped battle option commands new to KCv3."
/SendPM #Source, "!GameCmds: Displays the list of games available for you to play"
/SendPM #Source, "!MoneyCmds: This displays any money commands that fall outside the gaming category."
/SendPM #Source, "!MiscCmds: Shows a list of commands that don't necessary fit under a category."
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)) > 0
/SendPM #Source, "!AuthCmds: These are all the commands specific to the authority you've been given at this server."
EndIf
/Unset $Temp
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/StopEvent
/Exit
EndIf

If $A = "GuildCmds"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                    *** Kirby's Casino - Guild Commands ***                                             ***"
/SendPm #Source, ""
/SendPM #Source, "!GuildInfo: Use this to gain a greater understanding of the Guild System new to KCv3."
/SendPM #Source, "!GuildStats: This command displays the members, points, victories and losses of each clan."
/SendPM #Source, "!JoinGuild <Name>: Join one of the three guilds. [Tsunami, Eruption or Cyclone]"
/SendPM #Source, "!Retire: Allows you to freelance. Please read Guild Info concerning transfers and Battle Points."
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Exit
EndIf

If $A = "TournCmds"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                   *** Kirby's Casino - Tourney Commands ***                                             ***"
/SendPm #Source, ""
/SendPM #Source, "!Enter: Should a tournament be running, use this to enter it."
/SendPM #Source, "!ViewPlayers: Use this to check on the status of a tournament that is already running."
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Exit
EndIf

If $A = "BattleCmds"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                     *** Kirby's Casino - Battle Options ***                                                ***"
/SendPm #Source, ""
/SendPM #Source, "!ShowTeam: Shows your team."
/SendPM #Source, "!HideTeam: Makes sure your team is invisible until battle starts."
/SendPm #Source, "!CCOn: Accepts Challenge Cup challenges."
/SendPm #Source, "!CCOff: Declines Challenge Cup challenges."
/SendPm #Source, ""
/SendPM #Source, "!ClausePokemon <no.>: Prevents a player with a certain Pokemon from challenging you. (eg. !ClausePokemon 150) *"
/SendPM #Source, "!ClauseMove <no.>: Prevents a player with a certain move from challenging you. (eg. !ClauseItem 228) *"
/SendPM #Source, "!ClauseItem <no.>: Prevents a player with a certain item from challenging you. (eg. !ClauseItem 74) *"
/SendPM #Source, "!ViewClauses: Shows you a list of all your current clauses."
/SendPM #Source, "!ResetClauses: Clears all your clauses so you can set them again."

/SendPM #Source, ""
/SendPM #Source, "*: Pokemon/Move/Item numbers can be found at http://kirbyscasino.ipbfree.com/index.php?act=ST&f=8&t=85&st=0"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Exit
EndIf

If $A = "MoneyCmds"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                  *** Kirby's Casino - Money Commands ***                                             ***"
/SendPm #Source, ""
/SendPM #Source, "!Shop: Head to the shop to spend your hard-earned coins and achievements on unlockables."
/SendPM #Source, "!Donate <Amount> <Name>: Donates a set amount of casino coins to another player."
/SendPM #Source, "!GetAJob: Awards you a job which allows you to collect a salary every ten minutes."
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Exit
EndIf

If $A = "GameCmds"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                   *** Kirby's Casino - Game Commands ***                                            ***"
/SendPm #Source, ""
/SendPM #Source, "!Slots: Lets you play the slots. The cost is 3 casino coins."
/SendPM #Source, "!WoF: Use this to spin the Wheel of Fortune. The cost is 3 casino coins."
/SendPM #Source, "!LuckyDraw: Use this to play the Lucky Draw game. The cost is 3 casino coins."
/SendPM #Source, "!BJ: Starts a game of Blackjack. The cost is 5 casino coins."
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Exit
EndIf

If $A = "MiscCmds"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                    *** Kirby's Casino - Misc. Commands ***                                            ***"
/SendPm #Source, ""
/SendPM #Source, "!Refresh: Use this to update your Extra Info should you feel the need to."
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Exit
EndIf

If $A = "Refresh"
/SendPM #Source, ""
/SendPM #Source, $Bot & "Your Extra Info has been updated."
/SendPM #Source, ""
Goto NewInfo
EndIf

If $A = "HallOfFame"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                       *** Kirby's Casino Hall Of Fame ***                                                  ***"
/SendPM #Source, "Highest Streak:                                                 <empty>"
/SendPM #Source, "Highest Tournament Streak:                         <empty>"
/SendPM #Source, "First to Max Out Achievement Points:        <empty>"
/SendPM #Source, "First to Max Out Battle Points:                     <empty>"
/SendPM #Source, "First to Max Out Coins:                                   <empty>"
/SendPM #Source, "*** -============================================================================-   ***"
/Exit
EndIf

If $A = "GuildInfo"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                     *** Information - The Guild System ***                                               ***"
/SendPM #Source, "In order to encourage battling as a team, a guild system has been implemented into the Casino."
/SendPM #Source, "Players can join one of three guilds, being Teams Cyclone, Tsunami and Eruption respectively."
/SendPM #Source, "In order to earn points for their clan, players must battle clans of other guilds or those not in a guild."
/SendPM #Source, "Those currently not in a guild are known as freelancers, and gain points by defeating any guild member."
/SendPM #Source, "While points are added to the player's guild, the player accumluates Battle Points for themselves."
/SendPM #Source, "In the case of a freelancer, they only earn Battle Points."
/SendPM #Source, "Players are encouraged to represent their guilds in the regular tournaments held at Kirby's Casino."
/SendPM #Source, ""
/SendPM #Source, "What is the benefit for the player?"
/SendPM #Source, "As Battle Points are accumulated, the player increases in rank."
/SendPM #Source, "Each guild has 10 ranks, as do freelancers."
/SendPM #Source, "Rank increases translate to higher payments for freelancers hired by guilds for a set amount of battles."
/SendPM #Source, ""
/SendPM #Source, "Guild members, victories, losses and total points are monitored using a ladder system."
/SendPM #Source, "The statistics on each guild can be accessed at anytime by typing !GuildStats or /GuildStats."
/SendPM #Source, ""
/SendPM #Source, "NOTE: Players can only join one guild. They can choose to defect and become a freelancer, but"
/SendPM #Source, "              may only re-enter their original guild. Defecting from a guild to become a freelancer and"
/SendPM #Source, "              vice-versa erases the players' rank and Battle Points. Please choose wisely!"
/SendPM #Source, "*** -============================================================================-   ***"
/Exit
EndIf

If $A = "GuildStats"
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                       *** Kirby's Casino Guild Standings ***                                            ***"
/SendPM #Source, "Team Cyclone:"
/SendPM #Source, "           - Members: " & $Str(#GetValue(__CycloneMembers))
/SendPM #Source, "           - Victories: " & $Str(#GetValue(__CycloneWins))
/SendPM #Source, "           - Losses: " & $Str(#GetValue(__CycloneLosses))
/SendPM #Source, "           - Guild Points: " & $Str(#GetValue(__CyclonePoints))
/SendPM #Source, ""
/SendPM #Source, "Team Eruption:"
/SendPM #Source, "           - Members: " & $Str(#GetValue(__EruptionMembers))
/SendPM #Source, "           - Victories: " & $Str(#GetValue(__EruptionWins))
/SendPM #Source, "           - Losses: " & $Str(#GetValue(__EruptionLosses))
/SendPM #Source, "           - Guild Points: " & $Str(#GetValue(__EruptionPoints))
/SendPM #Source, ""
/SendPM #Source, "Team Tsunami:"
/SendPM #Source, "           - Members: " & $Str(#GetValue(__TsunamiMembers))
/SendPM #Source, "           - Victories: " & $Str(#GetValue(__TsunamiWins))
/SendPM #Source, "           - Losses: " & $Str(#GetValue(__TsunamiLosses))
/SendPM #Source, "           - Guild Points: " & $Str(#GetValue(__TsunamiPoints))
/SendPM #Source, "*** -============================================================================-   ***"
/Exit
EndIf

If $A = "JoinGuild"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
If $B = ""
/SendPM #Source, $Bot & "If you're going to be joining a guild, you need to type it's name after the command!"
/Exit
EndIf
If $B <> "Tsunami" AND $B <> "Cyclone" AND $B <> "Eruption"
/SendPM #Source, $Bot & "'" & $B & "' is not a valid guild. The three guilds are Cyclone, Tsunami and Eruption."
/Exit
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #IsIn($Temp, "Cyclone||") > 0 AND #IsIn($B, "Cyclone") = 0
/SendPM #Source, $Bot & "You cannot join that guild. You can either join Team Cyclone or freelance."
/SendPM #Source, $Bot & "Type !GuildInfo and read the information for why this is the case."
/Exit
EndIf
If #IsIn($Temp, "Eruption||") > 0 AND #IsIn($B, "Eruption") = 0
/SendPM #Source, $Bot & "You cannot join that guild. You can either join Team Eruption or freelance."
/SendPM #Source, $Bot & "Type !GuildInfo and read the information for why this is the case."
/Exit
EndIf
If #IsIn($Temp, "Tsunami||") > 0 AND #IsIn($B, "Tsunami") = 0
/SendPM #Source, $Bot & "You cannot join that guild. You can either join Team Tsunami or freelance."
/SendPM #Source, $Bot & "Type !GuildInfo and read the information for why this is the case."
/Exit
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #Val($Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1)) > 0
/SendPM #Source, $Bot & "You can't join a guild! You're already a member of another guild!"
/Exit
EndIf
If #IsIn($B, "Cyclone") > 0
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "X" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "@", X1@)
/Set $Temp, $GetValue($GetPlayerInfo(#Source,PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Temp & "||Cyclone||"
EndIf
If #IsIn($B, "Eruption") > 0
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "X" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "@", X2@)
/Set $Temp, $GetValue($GetPlayerInfo(#Source,PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Temp & "||Eruption||"
EndIf
If #IsIn($B, "Tsunami") > 0
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "X" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "@", X3@)
/Set $Temp, $GetValue($GetPlayerInfo(#Source,PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Temp & "||Tsunami||"
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source,PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1) & "#", 1#)
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1) & "\", 0\)
/SendAll ""
/SendAll $Bot & $Name(#Source) & " just became a member of the " & $UCase($Left($B, 1)) & $LCase($Mid($B, 2, 10)) & " Guild!"
/SendAll ""
/SaveValue "__"&$B&"Members", #GetValue("__"&$B&"Members") + 1
Goto NewInfo
/Exit
EndIf

If $A = "Retire"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #Val($Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1)) < 1
/SendPM #Source, $Bot & "You're not in a guild, therefore there is no reason to retire."
/Exit
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1) & "#", 1#)
/SaveValue "__"&$GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")&"Members", #GetValue("__"&$GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")&"Members") - 1
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1) & "\", 0\)
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "X" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "@", X0@)
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1) & "#", 1#)
/SendAll ""
/SendAll $Bot & $Name(#Source) & " has just retired from service to their Guild."
/SendAll ""
Goto NewInfo
/Exit
EndIf

If $A = "ShowTeam" 
/SetPlayerInfo #Source, HIDE, 1 
/SendPM #Source, "" 
/SendPM #Source, $Bot & " Your team is now visible to all."
/SendPM #Source, "" 
/StopEvent 
/Exit 
EndIf 

If $A = "HideTeam" 
/SetPlayerInfo #Source, HIDE, 0 
/SendPM #Source, "" 
/SendPM #Source, $Bot & " Your team is now hidden."
/SendPM #Source, "" 
/StopEvent 
/Exit 
EndIf 

If $A = "CCOn"
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($GetValue($GetPlayerInfo(#Source, PSID) & "_Stats"), "CC: Off", "CC: On")
/SendPM #Source, "" 
/SendPM #Source, $Bot & " Challenges with the Challenge Cup clause enabled will not be stopped."
/SendPM #Source, "" 
/Exit
EndIf

If $A = "CCOff"
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($GetValue($GetPlayerInfo(#Source, PSID) & "_Stats"), "CC: On", "CC: Off")
/SendPM #Source, "" 
/SendPM #Source, $Bot & " Challenges with the Challenge Cup clause enabled will be prevented."
/SendPM #Source, "" 
/Exit
EndIf

If $A = "ClausePokemon"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
If #Val($B) < 1 OR #Val($B) > 389
/SendPM #Source, $Bot & "You must enter a number between 1 and 389. *"
/SendPM #Source, $Bot & "*: For an exhaustive clause list, visit http://kirbyscasino.ipbfree.com/index.php?showtopic=85&st=0."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes"), $Str(#Val($B)) & "/") > 0
/SendPM #Source, $Bot & "That's already in your clause list!"
/SendPM #Source, $Bot & "Type !ViewClauses to view your clause list."
/Exit
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CPokes", $GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes") & $Str(#Val($B)) & "/"
/SendPM #Source, ""
/SendPM #Source, $Bot & "You have added the Pokemon '" & $Pokemon(#Val($B)) & "' to your clause list."
/SendPM #Source, $Bot & "Type !ViewClauses to see your all of your clauses."
/SendPM #Source, ""
/Exit
EndIf

If $A = "ClauseMove"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
If #Val($B) < 1 OR #Val($B) > 389
/SendPM #Source, $Bot & "You must enter a number between 1 and 354. *"
/SendPM #Source, $Bot & "*: For an exhaustive clause list, visit http://kirbyscasino.ipbfree.com/index.php?showtopic=85&st=0."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#Val($B)) & "/") > 0
/SendPM #Source, $Bot & "That's already in your clause list!"
/SendPM #Source, $Bot & "Type !ViewClauses to view your clause list."
/Exit
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CMoves", $GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves") & $Str(#Val($B)) & "/"
/SendPM #Source, ""
/SendPM #Source, $Bot & "You have added the move '" & $Move(#Val($B)) & "' to your clause list."
/SendPM #Source, $Bot & "Type !ViewClauses to see your all of your clauses."
/SendPM #Source, ""
/Exit
EndIf

If $A = "ClauseItem"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
If #Val($B) < 1 OR #Val($B) > 389
/SendPM #Source, $Bot & "You must enter a number between 1 and 354. *"
/SendPM #Source, $Bot & "*: For an exhaustive clause list, visit http://kirbyscasino.ipbfree.com/index.php?showtopic=85&st=0."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CItems"), $Str(#Val($B)) & "/") > 0
/SendPM #Source, $Bot & "That's already in your clause list!"
/SendPM #Source, $Bot & "Type !ViewClauses to view your clause list."
/Exit
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CItems", $GetValue($GetPlayerInfo(#Source, PSID) & "_CItems") & $Str(#Val($B)) & "/"
/SendPM #Source, ""
/SendPM #Source, $Bot & "You have added the item '" & $Item(#Val($B)) & "' to your clause list."
/SendPM #Source, $Bot & "Type !ViewClauses to see your all of your clauses."
/SendPM #Source, ""
/Exit
EndIf

If $A = "ViewClauses"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                        *** Your Custom Battle Clauses***                                                  ***"
/SendPM #Source, $Bot & "You have made the following clauses for people challenging you here at the Casino."
/SendPM #Source, $Bot & "Clauses are displayed as '/x/y/' in order to easily differentiate between them."
/SendPM #Source, ""

/SendPM #Source, "Cannot Use Pokemon:"
If #Len($GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes")) < 2
/SendPM #Source, "You haven't claused any Pokemon."
Else
/SendPM #Source, $GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes")
EndIf
/SendPM #Source, ""
/SendPM #Source, "Cannot Use Moves:"
If #Len($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves")) < 2
/SendPM #Source, "You haven't claused any moves."
Else
/SendPM #Source, $GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves")
EndIf
/SendPM #Source, ""
/SendPM #Source, "Cannot Use Items:"
If #Len($GetValue($GetPlayerInfo(#Source, PSID) & "_CItems")) < 2
/SendPM #Source, "You haven't claused any items."
Else
/SendPM #Source, $GetValue($GetPlayerInfo(#Source, PSID) & "_CItems")
EndIf
/SendPM #Source, ""
/SendPM #Source, ":http://kirbyscasino.ipbfree.com/index.php?showtopic=85&st=0 displays all the matching number values."
/SendPM #Source, ":Remember, you can erase your clauses at any time by typing !ResetClauses or /ResetClauses."
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Exit
EndIf

If $A = "ResetClauses"
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CPokes", "/"
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CMoves", "/"
/SaveValue $GetPlayerInfo(#Source, PSID) & "_CItems", "/"
/SendPM #Source, ""
/SendPM #Source, $Bot & "All your clauses have been cleared!"
/SendPM #Source, ""
/Exit
EndIf

If $A = "LuckyDraw"
If #KC = 0
/SendPM #Source, $Bot & "That command is currently disabled. Why not play some Blackjack instead?"
/Exit
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
If #A < 3
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have enough coins to play Blackjack! The minimum to play Blackjack is 3 coins."
/SendPM #Source, ""
/Exit
EndIf
//If #GetValue($GetPlayerInfo(#Source, PSID) & "_Gambles") > 15
///sendpm #source, ""
///SendPM #Source, $Bot & "You have reached your Spam Command limit for this minute."
///SendPM #Source, $Bot & "Why not play some Blackjack instead?"
///sendpm #source, ""
///Exit
//EndIf
///SaveValue $GetPlayerInfo(#Source, PSID) & "_Gambles", #GetValue($GetPlayerInfo(#Source, PSID) & "_Gambles") + 1
  /SendPM #Source, ""  
  /SendPM #Source, "*** You give the Attendant 5 coins and look at your ticket. ***"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A - 3
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/Set #TempA, #Rand(999, 111)
/Set #TempB, #Rand(999, 111)
/Set #TempC, #Rand(999, 111)
/Set #TempD, #Rand(999, 111)
/Set #TempE, #Rand(999, 111)
/Set #TempF, #Rand(999, 111)
/Set #Vand, #Rand(999, 111)
 /SendPM #Source, ""
 /SendPm #Source, "*** -============================================================================-   ***"
 /SendPM #Source, "***                                                      *** Luck of the Draw Results ***                                                      ***"
/sendpm #source, "  _______________"
/sendpm #source, "  [  *** TICKET ***   ]"
/sendpm #source, "  [                            ]"
/sendpm #source, "  [          "&$Str(#TempA)&"            ]"
/sendpm #source, "  [          "&$Str(#TempB)&"            ]"
/sendpm #source, "  [          "&$Str(#TempC)&"            ]"
/sendpm #source, "  [          "&$Str(#TempD)&"            ]"
/sendpm #source, "  [          "&$Str(#TempE)&"            ]"
/sendpm #source, "  [          "&$Str(#TempF)&"            ]"
/sendpm #source, "  [______________]"
/sendpm #source, ""
/sendpm #source, "RANDOM NUMBER: " & $Str(#Vand)
/sendpm #source, ""
If #TempA = #Vand OR #TempB = #Vand OR #TempC = #Vand OR #TempD = #Vand OR #TempE = #Vand OR #TempF = #Vand
/sendpm #source, "*** You have a match! Congratulations! You just won 4000 coins! ***"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 4000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/sendpm #source, "*** -============================================================================-   ***"
/sendpm #source, ""
/Unset #TempA
/Unset #TempB
/Unset #TempC
/Unset #TempD
/Unset #Vand
/Exit
EndIf
/sendpm #source, "*** Sorry, no numbers on your ticket matched to Random Number. ***"
/sendpm #source, ""
/sendpm #source, "Attendant: Better luck next time."
/sendpm #source, "*** -============================================================================-   ***"
/sendpm #source, ""
/Unset #TempA
/Unset #TempB
/Unset #TempC
/Unset #TempD
/Unset #Vand
Goto NewInfo
/Exit
EndIf

If $A = "WoF"
If #KC = 0
/SendPM #Source, $Bot & "That command is currently disabled. Why not play some Blackjack instead?"
/Exit
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
If #A < 3
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have enough coins to play Blackjack! The minimum to play Blackjack is 5 coins."
/SendPM #Source, ""
/Exit
EndIf
//If #GetValue($GetPlayerInfo(#Source, PSID) & "_) > 15
///sendpm #source, ""
///SendPM #Source, $Bot & "You have reached your Spam Command limit for this minute."
///SendPM #Source, $Bot & "Why not play some Blackjack instead?"
///sendpm #source, ""
///Exit
//EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Gambles", #GetValue($GetPlayerInfo(#Source, PSID) & "_Gambles") + 1
/Set #TempA, #Rand(100, 0)
/Set #TempB, #Rand(3, 1)
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A - 3
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/SendPM #Source, ""
/SendPm #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                    *** Wheel of Fortune Results ***                                                        ***"
If #TempA < 41
/sendpm #source, $Bot & "The Wheel of Fortune has landed on Duskull. No coins for you!"
/sendpm #source, "*** -============================================================================-   ***"
/SendPM #Source, ""
Goto NewInfo
/Exit
EndIf
If #TempA > 40 AND #TempA < 66
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 3
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/sendpm #source, $Bot & "The Wheel of Fortune has landed on Makuhita. You win your money back!"
/sendpm #source, "*** -============================================================================-   ***"
/SendPM #Source, ""
Goto NewInfo
/Exit
EndIf
If #TempA > 65 AND #TempA < 81
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 20
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/sendpm #source, $Bot & "The Wheel of Fortune has landed on Azurill. You win 20 coins!"
/sendpm #source, "*** -============================================================================-   ***"
/SendPM #Source, ""
Goto NewInfo
/Exit
EndIf
If #TempA > 80 AND #TempA < 91
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 30
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/sendpm #source, $Bot & "The Wheel of Fortune has landed on Pichu. You win 30 coins!"
/sendpm #source, "*** -============================================================================-   ***"
/SendPM #Source, ""
Goto NewInfo
/Exit
If #TempA < 100
:Wysmack
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 50
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/sendpm #source, $Bot & "The Wheel of Fortune has landed on Wynaut. You win 50 coins!"
/sendpm #source, "*** -============================================================================-   ***"
/SendPM #Source, ""
Goto NewInfo
/Exit
EndIf
EndIf
If #TempA = 100 AND #TempB = 3
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 2500
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/SendPM #Source, ""
/sendpm #source, "                               , - ----------------- - ,   "
/sendpm #source, "                             /                          \  "
/sendpm #source, "                          /         ( ')      ( ')         \  "
/sendpm #source, "                          l   =''''=  _____  =''''=    l  "
/sendpm #source, "                        /_           \___/            _\"
/sendpm #source, "                           \                              /           "
/sendpm #source, "                          .--\_____________/-- ."
/sendpm #source, "                         l____/                 \____l   "
/SendPM #Source, ""
/sendpm #source, "*** GRAND PRIZE! ***"
/sendpm #source, $Bot & "The Wheel of Fortune has landed on Kirby! You win 2500 coins!"
/sendpm #source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SendAll $Bot & $Name(#Source) & " has just won the Grand Prize of 2500 on the Wheel of Fortune! Wow!"
/Exit
EndIf
Goto WySmack
EndIf

If $A = "Slots"

If #KC = 0
/SendPM #Source, $Bot & "That command is currently disabled. Why not play some Blackjack instead?"
/Exit
EndIf

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
If #A < 3
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have enough coins to play the Slots! The minimum to play Blackjack is 5 coins."
/SendPM #Source, ""
/Exit
EndIf

//If #GetValue($GetPlayerInfo(#Source, PSID) & "_Gambles") > 15
///sendpm #source, ""
///SendPM #Source, $Bot & "You have reached your Spam Command limit for this minute."
///SendPM #Source, $Bot & "Why not play some Blackjack instead?"
///sendpm #source, ""
///Exit
//EndIf
///SaveValue $GetPlayerInfo(#Source, PSID) & "_Gambles", #GetValue($GetPlayerInfo(#Source, PSID) & "_Gambles") + 1

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A - 5
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))


  /Set #One, #Rand(7,1)
  /Set #Two, #Rand(7,1)
  /Set #Three, #Rand(7,1)
  /Set #Four, #Rand(7,1)
  /Set #Five, #Rand(7,1)
  /Set #Six, #Rand(7,1)
  /Set #Seven, #Rand(7,1)
  /Set #Eight, #Rand(7,1)
  /Set #Nine, #Rand(7,1)
  /SendPM #Source, ""
  /sendpm #source, "*** -============================================================================-   ***"
  /SendPM #Source, "*** SLOT RESULTS ***"
  /SendPM #Source, ""
  /SendPM #Source, "|  " & $Str(#One) & "  |  " & $Str(#Two) & "  |  " & $Str(#Three) & "  |  "
  /SendPM #Source, "|  " & $Str(#Four) & "  |  " & $Str(#Five) & "  |  " & $Str(#Six) & "  |  "
  /SendPM #Source, "|  " & $Str(#Seven) & "  |  " & $Str(#Eight) & "  |  " & $Str(#Nine) & "  |  "
  /SendPM #Source, ""
  /sendpm #source, "*** -============================================================================-   ***"
  If #One = #Two AND #Two = #Three
   /Set #Value, #One
   Goto Money
  EndIf
  If #One = #Five AND #Five = #Nine
   /Set #Value, #One
   Goto Money
  EndIf
  If #One = #Four AND #Four = #Seven
   /Set #Value, #One
   Goto Money
  EndIf
  If #Two = #Five AND #Five = #Eight
   /Set #Value, #Two
   Goto Money
  EndIf
  If #Three = #Five AND #Five = #Seven
   /Set #Value, #Three
   Goto Money
  EndIf
  If #Three = #Six AND #Six = #Nine
   /Set #Value, #Three
   Goto Money
  EndIf
  If #Four = #Five AND #Five = #Six
   /Set #Value, #Four
   Goto Money
  EndIf
  If #Seven = #Nine AND #Nine = #Eight
   /Set #Value, #Seven
   Goto Money
  EndIf
  /sendpm #source, $Bot & "Unfortunately, you have won nothing. Better luck next time!"
  /sendpm #source, "*** -============================================================================-   ***"
  /SendPM #Source, ""
   Goto NewInfo  
/Exit
  :Money
   If #Value = 0
    /SendPM #Source, $Bot & "You've won your money back! ***"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 5
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
   EndIf  
   If #Value = 1
    /SendPM #Source, $Bot & "You've won your money back!"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 5
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
   EndIf
   If #Value = 2
    /SendPM #Source, $Bot & "You've won 10 coins! Congratulations!"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 10
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
   EndIf
   If #Value = 3
    /SendPM #Source, $Bot & "You've won 15 coins! Congratulations!"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 15
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
   EndIf
   If #Value = 4
    /SendPM #Source, $Bot & "You've won 20 coins! Congratulations!"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 20
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))

   EndIf
   If #Value = 5
    /SendPM #Source, $Bot & "You've won 25 coins! Congratulations!"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 25
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))

   EndIf
   If #Value = 6
    /SendPM #Source, $Bot & "You've won our regular bonus of 45 coins! Congratulations!"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 45
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))

   EndIf
   If #Value = 7
    /SendPM #Source, $Bot & "You've won our big bonus of 95 coins! Congratulations!"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + 95
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))

   EndIf
  /sendpm #source, "*** -============================================================================-   ***"
  /sendpm #source, ""
   Goto NewInfo
  /Exit
 EndIf


If $A = "Blackjack" OR $A = "BJ"

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))

If $Game(#Source) <> ""
/SendPM #Source, ""
/SendPM #Source, $Bot & "You can't start playing another game right now!"
/SendPM #Source, $Bot & "You're in the middle of " & $Game(#Source) & "!"
/SendPM #Source, $Bot & "Finish what you're doing first!"
/SendPM #Source, ""
/Exit
EndIf

If #A < 5
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have enough coins to play Blackjack! The minimum to play Blackjack is 5 coins."
/SendPM #Source, ""
/Exit
EndIf

/Set $Game(#Source), "a game of Blackjack"

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A - 5
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A) & "/", "$" & $Str(#B) & "/")

/Set #Temp, #Rand(11, 2)
If #Temp = 11
/Set #TempA, #Rand(4, 1)
/Set #Temp, 10
Else
Goto Card
EndIf

If #TempA = 1
/Set $Temp, "King"
EndIf
If #TempA = 2
/Set $Temp, "Queen"
EndIf
If #TempA = 3
/Set $Temp, "Jack"
EndIf
If #TempA = 4
/Set $Temp, "Ace"
/Set #Temp, 11
EndIf
Goto DoneCard

:Card
/Set $TempA, $Str(#Temp)
:DoneCard

/Set #TempB, #Rand(21, 15)

/Set $GameData(#Source), $Str(#Temp) & "/" & $Str(#TempB) & "/1"

/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                                  *** Blackjack ***                                                                  ***"
/SendPM #Source, $Bot & $Name(#Source) & ", welcome to Blackjack."
/SendPM #Source, $Bot & "We have removed 5 coins from you. Best of luck to you!"
/SendPM #Source, $Bot & "If you need to brush up on the aim of the game, type !BlackJackHelp."
/SendPM #Source, ""
If #Temp < 11
/SendPM #Source, "*** You drew the card - " & $Str(#Temp) & "! ***"
Else
/SendPM #Source, "*** You drew the card - Ace ! ***"
EndIf
/SendPM #Source, "*** That makes your total so far equal to " & $Str(#Temp) & ". ***"
/SendPM #Source, ""
/SendPM #Source, $Bot & "Type !BJDraw to draw another card."
/SendPM #Source, $Bot & "Type !BJFold to keep your card(s) and have your total counted."
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Set $Phase(#Source), "Blackjack 1"
/Exit
EndIf

If $A = "BJDraw"

/StopEvent

If $Game(#Source) <> "a game of Blackjack"
/SendPM #Source, ""
/SendPM #Source, $Bot & "Now is not the time to be using that!"
/SendPM #Source, ""
/Exit
EndIf

If $Phase(#Source) = "Blackjack 1"
Goto Nexta
EndIf
/SendPM #Source, ""
/SendPM #Source, $Bot & "You're not at the right stage of the game to be doing that!"
/SendPM #Source, ""
/Exit


:Nexta

/Set #PlayerScore, #Val($Mid($GameData(#Source), (1*2) + (1-2), 2))
/Set #CompScore, #Val($Mid($GameData(#Source), (2*2) + (2-2), 2))
/Set #PlayerPhase, #Val($Mid($GameData(#Source), (3*2) + (3-2), 1))

/Set #Temp, #Rand(11, 2)
If #Temp = 11
/Set #TempA, #Rand(4, 1)
/Set #Temp, 10
Else
Goto Carda
EndIf

If #TempA = 1
/Set $Temp, "King"
EndIf
If #TempA = 2
/Set $Temp, "Queen"
EndIf
If #TempA = 3
/Set $Temp, "Jack"
EndIf
If #TempA = 4
/Set $Temp, "Ace"
/Set #Temp, 11
EndIf
Goto DoneCarda

:Carda
/Set $Temp, $Str(#Temp)

:DoneCarda

/Set #PlayerScore, #PlayerScore + #Temp
/Set #CompScore, #Val($Mid($GameData(#Source), (2*2) + (2-2), 2))
/Set #PlayerPhase, #Val($Mid($GameData(#Source), (3*2) + (3-2), 1))

/Set $GameData(#Source), $Str(#PlayerScore)&"/"&$Str(#CompScore)&"/"&$Str(#PlayerPhase)

/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                                  *** Blackjack ***                                                                  ***"
/SendPM #Source, ""
/SendPM #Source, "*** You drew the card - " & $Temp & "! ***"
/SendPM #Source, "*** That makes your total so far equal to " & $Str(#PlayerScore) & ". ***"
If #PlayerScore > 21
/SendPM #Source, ""
/SendPM #Source, $Bot & "You have gone bust! Your total exceeds 21."
/SendPM #Source, $Bot & "I am terribly sorry, but you have lost this game of Blackjack!"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Set $Game(#Source), ""
/Set $GameData(#Source), ""
/Unset #PlayerScore
/Unset #PlayerPhase
/Unset #CompScore
Goto NewInfo
/Exit
EndIf
If #PlayerScore < 22
/SendPM #Source, ""
/SendPM #Source, $Bot & "Type !BJDraw to draw another card."
/SendPM #Source, $Bot & "Type !BJFold to keep your card(s) and have your total counted."
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Set $GameData(#Source), $Str(#PlayerScore)&"/"&$Str(#CompScore)&"/"&$Str(#PlayerPhase)
/Exit
EndIf

/Exit
EndIf

If $A = "BJFold"

/StopEvent


If $Game(#Source) <> "a game of Blackjack"
/SendPM #Source, ""
/SendPM #Source, $Bot & "Now is not the time to be using that!"
/SendPM #Source, ""
/Exit
EndIf

If $Phase(#Source) = "Blackjack 1"
Goto Nextb
EndIf
/SendPM #Source, ""
/SendPM #Source, $Bot & "You're not at the right stage of the game to be doing that!"
/SendPM #Source, ""
/Exit

:Nextb

/Set #PlayerScore, #Val($Mid($GameData(#Source), (1*2) + (1-2), 2))

/Set #CompScore, #Val($Mid($GameData(#Source), (2*2) + (2-2), 2))
/Set #PlayerPhase, #Val($Mid($GameData(#Source), (3*2) + (3-2), 1))

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))

/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                                  *** Blackjack ***                                                                  ***"
/SendPM #Source, $Bot & "You have chosen to fold with your current total."
/SendPM #Source, $Bot & "Would you like to make a bet based on it?"
/SendPM #Source, $Bot & "Type !BJBet <number> to place a bet! (eg. !BJBet 50)"
/SendPM #Source, ""
/SendPM #Source, "*** Your total score is " & $Str(#PlayerScore) & ". ***"
/SendPM #Source, "*** You have " & $Str(#A) & " coins to bet with. ***"
/SendPM #Source, "*** -============================================================================-   ***"
/Set $Phase(#Source), "Blackjack 2"

/Exit
EndIf

If $A = "BJBet"

/StopEvent

If #IsIn($B, " ") > 0
/Set $B, $Left($B, #IsIn($B, " ") - 1)
EndIf

If $Game(#Source) <> "a game of Blackjack"
/SendPM #Source, ""
/SendPM #Source, $Bot & "Now is not the time to be using that!"
/SendPM #Source, ""
/Exit
EndIf

If $Phase(#Source) = "Blackjack 2"
Goto Nextc
EndIf
/SendPM #Source, ""
/SendPM #Source, $Bot & "You're not at the right stage of the game to be doing that!"
/SendPM #Source, ""
/Exit

:Nextc


/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))

If $B = ""
/SendPM #Source, ""
/SendPM #Source, $Bot & "You need to type in the amount you're betting! (ie. !BJBet 50)"
/SendPM #Source, $Bot & "You must bet at least one coin."
/SendPM #Source, ""
/Exit
EndIf
If #Val($B) > #A
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have enough money to make a bet of that magnitude!"
/SendPM #Source, ""
/Exit
EndIf
If #Val($B) < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You need to bet at least one coin!"
/SendPM #Source, ""
/Exit
EndIf
If #Val($B) <> #Int(#Val($B))
/SendPM #Source, ""
/SendPM #Source, $Bot & "Your bet cannot have decimal places in it!"
/SendPM #Source, ""
/Exit
EndIf

If #Val($B) > 500 AND #IsIn($Temp, "|| Upgrade") = 0
/SendPM #Source, ""
/SendPM #Source, $Bot & "You can only bet a maximum of 500 coins per Blackjack game!"
/SendPM #Source, $Bot & "This limit can be set higher by purchasing Upgrades at the KCv3 shop."
/SendPM #Source, ""
/Exit
EndIf
If #IsIn($Temp, "|| Upgrade Pack 1 ||") > 0 AND #Val($B) > 1000
/SendPM #Source, ""
/SendPM #Source, $Bot & "With Upgrade Pack 1, you can only bet a maximum of 1000 coins per Blackjack game! "
/SendPM #Source, ""
/Exit
EndIf
If #IsIn($Temp, "|| Upgrade Pack 2 ||") > 0 AND #Val($B) > 2000
/SendPM #Source, ""
/SendPM #Source, $Bot & "With Upgrade Pack 2, you can only bet a maximum of 2000 coins per Blackjack game! "
/SendPM #Source, ""
/Exit
EndIf
If #IsIn($Temp, "|| Upgrade Pack 3 ||") > 0 AND #Val($B) > 3500
/SendPM #Source, ""
/SendPM #Source, $Bot & "With Upgrade Pack 3, you can only bet a maximum of 3500 coins per Blackjack game! "
/SendPM #Source, ""
/Exit
EndIf

/Set #PlayerScore, #Val($Mid($GameData(#Source), (1*2) + (1-2), 2))

If #Val($B) > 0
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A - #Val($B)
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A) & "/", "$" & $Str(#B) & "/")
EndIf

If #PlayerScore = 21
/Set #CompScore, #Rand(20, 16)
Else
/Set #CompScore, #Rand(21, 16)
EndIf

/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                                  *** Blackjack ***                                                                  ***"
/SendPM #Source, $Bot & "You have placed a bet of "& $Str(#Val($B)) & " coins."
/SendPM #Source, $Bot & "The results of the Blackjack game are as follows -"
/SendPM #Source, ""
/SendPM #Source, "YOUR SCORE - " & $Str(#PlayerScore)
/SendPM #Source, "COMPUTER'S SCORE - " & $Str(#CompScore)
/SendPM #Source, ""
If #PlayerScore > #CompScore
If #PlayerScore = 21
/SendPM #Source, $Bot & "Congratulations, you won this round of Blackjack AND got a score of 21!"
/SendPM #Source, $BOT & "REWARD - "& $Str((2*(#Val($B))) + 5) &" coins"
/SendPM #Source, $BOT & "REWARD - 150 Achievement Points"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 150
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))

Goto WinnerB
Else
/SendPM #Source, $Bot & "Congratulations, you won this round of Blackjack!"
/SendPM #Source, $BOT & "REWARD - "& $Str((2*(#Val($B))) + 5) &" coins"
/SendPM #Source, $BOT & "REWARD - 75 Achievement Points"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 75
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))

Goto WinnerB
EndIf
:WinnerB
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + (2*(#Val($B))) + 5
If #B > 999999
/Set #B, 999999
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A) & "/", "$" & $Str(#B) & "/")
/Set $Game(#Source), ""
/Set $GameData(#Source), ""
/Unset #PlayerScore
/Unset #PlayerPhase
/Unset #CompScore
Goto NewInfo
/Exit
EndIf
If #PlayerScore < #CompScore
/SendPM #Source, $Bot & "Unfortunately, you lost this round of Blackjack ..."
/SendPM #Source, $Bot & "Better luck next time!"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Set $Game(#Source), ""
/Set $GameData(#Source), ""
/Unset #PlayerScore
/Unset #PlayerPhase
/Unset #CompScore
Goto NewInfo
/Exit
EndIf
If #PlayerScore = #CompScore
/SendPM #Source, $Bot & "Unfortunately, you lost this round of Blackjack ..."
/SendPM #Source, $Bot & "Getting the same score as the computer counts as a loss."
/SendPM #Source, $Bot & "Better luck next time!"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/Set $Game(#Source), ""
/Set $GameData(#Source), ""
/Unset #PlayerScore
/Unset #PlayerPhase
/Unset #CompScore
Goto NewInfo
/Exit
EndIf
EndIf

If $A = "Shop"
/SendPM #Source, "*** -======================================================================================-   ***"
/SendPM #Source, "***                                                                   *** The Kirby's Casino Shop ***                                                               ***"
/SendPM #Source, $Bot & "Welcome to the Kirby's Casino V3 Shop! You have the following options here."
/SendPM #Source, ""
/SendPM #Source, "!ConvertCoins <amount>: Will convert Casino Coins into Achievement Points at a ratio of 50:1."
/SendPM #Source, ""
/SendPM #Source, "!Upgrade Package #1: Upgrades the max. bet placable on Blackjack. [Cost - 15000 coins]"
/SendPM #Source, "!Upgrade Package #2: Further upgrades the max. bet placable on Blackjack. [Cost - 25000 coins]"
/SendPM #Source, "!Upgrade Package #3: Maximises the max. bet placable on Blackjack. [Cost - 50000 coins]"
/SendPM #Source, "*** -======================================================================================-   ***"
/Exit
EndIf

If $A = "Upgrade"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
If $B <> "Package #1" AND $B <> "Package #2" AND $B <> "Package #3"
/SendPM #Source, $Bot & "That is not a valid upgrade package."
/Exit
EndIf

If #IsIn($B, "Package #1") > 0

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))

If #A < 15000
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have enough in terms of Casino Coins for this purchase."
/SendPM #Source, $Bot & "You need a minimum of 15000 Casino Coins."
/SendPM #Source, ""
/Exit
EndIf

If #IsIn($Temp, "|| Upgrade") > 0
/SendPM #Source, ""
/SendPM #Source, $Bot & "You already have Upgrade Pack 1 or higher."
/SendPM #Source, ""
/Exit
EndIf

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A - 15000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Temp & " || Upgrade Pack 1 || "
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SendPM #Source, ""
/SendPM #Source, $Bot & "You have just purchased Upgrade Pack 1 for Blackjack. Thankyou!"
/SendPM #Source, ""
Goto NewInfo

EndIf

If #IsIn($B, "Package #2") > 0

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))

If #A < 25000
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have enough in terms of Casino Coins for this purchase."
/SendPM #Source, $Bot & "You need a minimum of 25000 Casino Coins."
/SendPM #Source, ""
/Exit
EndIf

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")

If #IsIn($Temp, "|| Upgrade Pack 1 ||") = 0
/SendPM #Source, ""
/SendPM #Source, $Bot & "In order to purchase Upgrade Pack 2, you need to have Upgrade Pack 1 currently."
/SendPM #Source, ""
/Exit
EndIf

/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A - 25000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "Pack 1", "Pack 2")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SendPM #Source, ""
/SendPM #Source, $Bot & "You have just purchased Upgrade Pack 2 for Blackjack. Thankyou!"
/SendPM #Source, ""
Goto NewInfo

EndIf

If #IsIn($B, "Package #3") > 0

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))

If #A < 50000
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have enough in terms of Casino Coins for this purchase."
/SendPM #Source, $Bot & "You need a minimum of 50000 Casino Coins."
/SendPM #Source, ""
/Exit
EndIf

If #IsIn($Temp, "|| Upgrade Pack 2 ||") = 0
/SendPM #Source, ""
/SendPM #Source, $Bot & "In order to purchase Upgrade Pack 3, you need to have Upgrade Pack 2 currently."
/SendPM #Source, ""
/Exit
EndIf

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A - 50000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "Pack 2", "Pack 3")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SendPM #Source, ""
/SendPM #Source, $Bot & "You have just purchased Upgrade Pack 3 for Blackjack. Thankyou!"
/SendPM #Source, ""
Goto NewInfo

EndIf

/Exit
EndIf

If $A = "ConvertCoins"
/Set $B, ""
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
If $B = ""
/SendPM #Source, $Bot & "You need to type the amount of Coins that you're actually converting."
/Exit
EndIf
If #Val($B) < 50
/SendPM #Source, $Bot & "You need to convert at least 50 Coins to Achievement Points."
/Exit
EndIf
If #Val($B) > #A
/SendPM #Source, $Bot & "You don't have that amount of Coins ..."
/Exit
EndIf
/Set #B, #Int(#Val($B) / 50)
/Set #TempB, #A - #Val($B)
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A) & "/", "$" & $Str(#TempB) & "/")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #A + #B
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#A) & "|", "/" & $Str(#TempB) & "|")
/SendPM #Source, $Bot & "You have successfully converted " & $B & " Coins into Achievement Points."
Goto NewInfo
/Exit
EndIf

If $A = "GetAJob"
/StopEvent
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set $TempY, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
/Set $TempZ, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                               *** Finding a Job ***                                                                ***"
/SendPM #Source, $Bot & "Please wait just a moment, your credentials are being checked ..."

If #Val($TempY) < 1
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job here!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved Job Level 1! You are now a Janitor! ***"
/SendPM #Source, "*** You earn a salary of 90 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#1!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit
EndIf

If #Val($TempY) < 2 AND #Val($TempZ) >= 2500
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job upgrade!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved Job Level 2! You now provide Room service! ***"
/SendPM #Source, "*** You earn a salary of 180 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#2!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit

EndIf

If #Val($TempY) < 3 AND #Val($TempZ) >= 7500
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job upgrade!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved Job Level 3! You are now a Slots Technician! ***"
/SendPM #Source, "*** You earn a salary of 270 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#3!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit
EndIf

If #Val($TempY) < 4 AND #Val($TempZ) >= 15000
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job upgrade!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved Job Level 4! You are now a Receptionist! ***"
/SendPM #Source, "*** You earn a salary of 360 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#4!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit
EndIf

If #Val($TempY) < 5 AND #Val($TempZ) >= 30000
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job upgrade!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved Job Level 5! You are now a Security Officer! ***"
/SendPM #Source, "*** You earn a salary of 450 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#5!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit
EndIf

If #Val($TempY) < 6 AND #Val($TempZ) >= 60000
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job upgrade!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved Job Level 6! You are now a Surveillance Officer! ***"
/SendPM #Source, "*** You earn a salary of 540 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#6!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit
EndIf

If #Val($TempY) < 7 AND #Val($TempZ) >= 120000
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job upgrade!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved Job Level 7! You are now a Game Dealer! ***"
/SendPM #Source, "*** You earn a salary of 630 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#7!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit
EndIf

If #Val($TempY) < 8 AND #Val($TempZ) >= 180000
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job upgrade!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved Job Level 8! You are now a Section Manager! ***"
/SendPM #Source, "*** You earn a salary of 720 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#8!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit
EndIf


If #Val($TempY) < 9 AND #Val($TempZ) >= 250000
/SendPM #Source, ""
/SendPM #Source, $Bot &"It seems that you are eligible for a job upgrade!"
/SendPM #Source, ""
/SendPM #Source, "*** Congratulations! You have achieved the final job at Job Level 9! You are now a Section Executive! ***"
/SendPM #Source, "*** You earn a salary of 810 coins per 10 minutes! ***"
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "#" & $TempY & "!", "#9!")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
Goto NewInfo
/Exit
EndIf

If #Val($TempY) < 9
/SendPM #Source, $Bot & "It seems your credentials are not good enough to attain the next Job Level."
/SendPM #Source, $Bot & "Type !JobAchievements to see what is required of you for your next level up."
/SendPM #Source, "*** -============================================================================-   ***"
/Exit
Else
/SendPM #Source, $Bot & "Your job level is already at Level 9!"
/SendPM #Source, $Bot & "There is no higher-wage job currently available at Kirby's Casino at this point in time!"
/SendPM #Source, "*** -============================================================================-   ***"
/Exit
EndIf

/Exit
EndIf

// Job Achievements: 1000 / 2500 / 7500 / 15000 / 30000 / 60000 / 120000 / 180000 / 250000

If $A = "JobAchievements"

/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                               *** Finding a Job ***                                                                ***"
/SendPM #Source, $Bot & "The following are the required Achievement Points for each job level."
/SendPM #Source, ""
/SendPM #Source, $Bot & "Job Level 1 - 1000 Achievement Points"
/SendPM #Source, $Bot & "Job Level 2 - 2500 Achievement Points"
/SendPM #Source, $Bot & "Job Level 3 - 7500 Achievement Points"
/SendPM #Source, $Bot & "Job Level 4 - 15000 Achievement Points"
/SendPM #Source, $Bot & "Job Level 5 - 30000 Achievement Points"
/SendPM #Source, $Bot & "Job Level 6 - 60000 Achievement Points"
/SendPM #Source, $Bot & "Job Level 7 - 120000 Achievement Points"
/SendPM #Source, $Bot & "Job Level 8 - 180000 Achievement Points"
/SendPM #Source, $Bot & "Job Level 9 - 250000 Achievement Points"
/SendPM #Source, "*** -============================================================================-   ***"

/Exit
EndIf

If $Message = "!ResetTourney" OR $Message = "/ResetTourney"
/StopEvent
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A < 1
/Exit
EndIf
If $Tourney <> "" OR $Battles <> ""
/SendAll $Bot & "" & $Name(#Source) & " just reset the Tournament!"
EndIf
/Set $Tourney, ""
/Set $Battles, ""
/Set #TType, 0
/SendPM #Source, $Bot & "The tournament was consequently cancelled!"
/Exit
EndIf

If #IsIn($Message, "!DQ ") = 1 OR #IsIn($Message, "/DQ ") = 1 AND #GetPlayerInfo(#Source, AUTH) > 0
  /StopEvent
  /Set $Val, $Right($Message, #Len($Message) - 4)
  If #IsIn($Tourney, "=" & $Val & "=") + #IsIn($Battles, "=" & $Val & "=") = 0
    /SendPM #Source, $Bot & " That person is not in the Tournament."
    /Exit
  EndIf
/SendAll "*** -============================================================================-   ***"
/SendAll "***                                                     *** Tournament Disqualification! ***                                                   ***"
  /SendAll $Bot & "" & $Name(#PNumber($Val)) & " has been disqualifed from the tournament by " & $Name(#Source) & "!"
  /Set $Tourney, $Replace($Tourney, "/" & $Right("00" & $Str(#PNumber($Val)), 3) & "/", "")
  /Set $Tourney, $Replace($Tourney, "=" & $Val & "=", "")
  If #IsIn($Battles, "=" & $Val & "=") = 0
    /Exit
  EndIf
  If #IsIn($Battles, "|=" & $Val & "=") > 0
    /Set $Var, $Right($Battles, #Len($Battles) - #IsIn($Battles, "|=" & $Val & "=") - 3 - #Len($Val))
    /Set $Var, $Left($Var, #IsIn($Var, "|") - 2)
  Else
    /Set $Var, $Left($Battles, #IsIn($Battles, "==" & $Val & "=|") - 1)
    :TsignPp
    /Set $Var, $Right($Var, #Len($Var) - #IsIn($Var, "|=") - 1)
    If #IsIn($Var, "=") > 0
      GoTo TsignPp
    EndIf
  EndIf
  /Set $Battles, $Replace($Battles, "=" & $Val & "=", "")
  /SendAll $Bot & "" & $Var & " advances to the next round as a result of the disqualification!"
/SendAll "*** -============================================================================-   ***"
  /Set $Battles, $Replace($Battles, "=" & $Var & "=", "")
  /Set $Tourney, "=" & $Var & "=" & $Tourney
  If #IsIn($Battles, "=") > 0
    /Exit
  EndIf
  /Set $Battles, ""

  If $Tourney = "=" & $Var & "="
    /Set $Tourney, ""
    /Set #X, #TType
/SendAll ""
    If #X = 1
      /SendAll $Bot & "" & $Var & " just won the Uber Tournament!"
    Else
      If #X = 2
        /SendAll $Bot & "" & $Var & " just won the Over Used Tournament!"
      Else
        If #X = 3
          /SendAll $Bot & "" & $Var & " just won the Under Used Tournament!"
        Else
          If #X = 4
            /SendAll $Bot & "" & $Var & " just won the Never Used Tournament!"
          Else
            If #X = 5
              /SendAll $Bot & "" & $Var & " just won the Un-Evolved Tournament!"
            Else
              If #X = 6
                /SendAll $Bot & "" & $Var & " just won the Challenge Cup Tournament!"
              Else
                If #X = 7
                  /SendAll $Bot & "" & $Var & " just won the Gold/Silver/Crystal Tournament!"
                Else
                  /SendAll $Bot & "" & $Var & " just won the Red/Blue/Yellow Tournament!"
                EndIf
              EndIf
            EndIf
          EndIf
        EndIf
      EndIf
    EndIf
/SendAll "*** -============================================================================-   ***"
/Set #PNumber($Var), #Temp
/Set #TempA, #PPlz * 150
/SendPM #Temp, $Bot & "REWARD - " & $Str(#TempA) & " Coins"
/SendPM #Temp, $Bot & "REWARD - " & $Str(#TempA) & " Achievement Points"
/SendPM #Temp "*** -============================================================================-   ***"

/Set $Temp, $GetValue($GetPlayerInfo(#Temp, PSID) & "_Stats")

/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + #TempA
If #B > 999999
/Set #B, 999999
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))

/Set $Temp, $GetValue($GetPlayerInfo(#Temp, PSID) & "_Stats")

/Set #A, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #B, #A + #TempA
If #B > 999999
/Set #B, 999999
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#A), "/" & $Str(#B))

    /Exit
  EndIf

  GoTo Tloop
EndIf

If $Left($Message, 8) = "!tourney" OR $Left($Message, 8) = "/tourney"
/StopEvent
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A < 1
/Exit
EndIf
If $Tourney <> "" OR $Battles <> ""
/SendPM #Source, $Bot & " A tournament is already running. Type !ResetTourney to stop it."
/Exit
EndIf
If #TType = -1
/SendPM #Source, $Bot & " A tournament is already in progress. Type !ResetTourney."
/Exit
EndIf
If #IsIn($Message, "!tourney ") = 0 AND #IsIn($Message, "/tourney ") = 0
/SendPM #Source, $Bot & " You didn't specify the amount of places available! (ie. !Tourney 16)"
/Exit
EndIf
/Set #Entrants, #Val($Right($Message, #Len($Message) - 9))
If #Entrants < 3 OR #Entrants > 200
/SendPM #Source, $Bot & " The minimum amount of entrants is 3. The maximum is 200."
/Exit
EndIf
/Set $Battles, ""
/StopEvent
/Set #TType, -1
/SendPM #Source, $Bot & " Now that the amount of entrants have been decided, choose the tournament type."
/SendPM #Source, $Bot & " Type !TType <number> to get the tournament going (ie. !TType 2 for an OU tourney.)"
/SendPM #Source, "*** Types of Tournament: ***"
/SendPM #Source, "1 - Uber"
/SendPM #Source, "2 - Over Used"
/SendPM #Source, "3 - Under Used"
/SendPM #Source, "4 - Never Used"
/SendPM #Source, "5 - UnEvolved"
/SendPM #Source, "6 - Challenge Cup"
/SendPM #Source, "7 - Gold/Silver/Crystal"
/SendPM #Source, "8 - Red/Blue/Yellow"
/Exit
EndIf

If $Left($Message, 7) = "!TType " OR $Left($Message, 7) = "/TType "
/StopEvent
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A < 1
/Exit
EndIf
If $Tourney <> "" OR $Battles <> ""
/SendPM #Source, $Bot & " A tournament is already running. Type !ResetTourney to stop it."
/Exit
EndIf
/Set #X, #Val($Right($Message, #Len($Message) - 7))
If #X < 1 OR #X > 8
/SendPM #Source, $Bot & " Not valid number."
/Exit
EndIf
/SendAll ""
/SendAll "*** -============================================================================-   ***"
/SendAll "***                                                     *** A Tournament has been initiated! ***                                           ***"
If #X = 1
/SendAll "Tournament Type: <Uber Tournament>"
Else
If #X = 2
/SendAll "Tournament Type: <Over Used Tournament>"
Else
If #X = 3
/SendAll "Tournament Type: <Under Used Tournament>"
Else
If #X = 4
/SendAll "Tournament Type: <Never Used Tournament>"
Else
If #X = 5
/SendAll "Tournament Type: <Un-Evolved Tournament>"
Else
If #X = 6
/SendAll "Tournament Type: <Challenge Cup Tournament>"
Else
If #X = 7
/SendAll "Tournament Type: <Gold/Silver/Crystal Tournament>"
Else
/SendAll "Tournament Type: <Red/Blue/Yellow Tournament>"
EndIf
EndIf
EndIf
EndIf
EndIf
EndIf
EndIf
/Set #Pplz, #Entrants
/SendAll "Spots Open: <" & $Str(#Entrants) & ">"
/SendAll "1st Place Prize: " &$Str(#Val(#Pplz * 150))&" Coins and Achievement Points"
/SendAll "2nd Place Prize: " &$Str(#Val(#Pplz * 100))&" Coins and Achievement Points"
/SendAll ""
/SendAll "Type !Enter to join the tournament."
/SendAll "*** -============================================================================-   ***"
/SendAll ""
/Set $Tourney, "||"
/Set #TType, #X
/Exit
EndIf


If $Message = "!Enter" OR $Message = "/Enter"
/StopEvent
If $Tourney = ""
/SendPM #Source, $Bot & " There is no tournament running. Maybe you should ask a Mod or Admin to initiate one?"
/Exit
EndIf
If #IsIn($Tourney, "/" & $Right("00" & $Str(#Source), 3) & "/") > 0 OR #IsIn($Tourney, "=" & $Name(#Source) & "=") > 0
/SendPM #Source, $Bot & " You already entered the tournament."
/Exit
EndIf
If #IsIn($Tourney, "|") = 0
/SendPM #Source, $Bot & " There is no space left for you to enter!"
/Exit
EndIf
If #GetPlayerInfo(#Source, "BWTH") <> 0
/SendPM #Source, $Bot & " When signing up, you can't be battling. This is to prevent pairing problems."
/Exit
EndIf
/Set $Tourney, $Tourney & "/" & $Right("00" & $Str(#Source), 3) & "/"
/Inc #Entrants, -1
/SendAll ""
/SendAll "*** -============================================================================-   ***"
/SendAll $Bot & "" & $Name(#Source) & " joined the tournament!"
/SendAll $Bot & "" & $Str(#Entrants) & " spot(s) are remaining!"
/SendAll "*** -============================================================================-   ***"
/SendAll ""
If #Entrants > 0
/Exit
Else
/Set $Tourney, $Replace($Tourney, "/", "")
/Set $Var, $Right($Tourney, #Len($Tourney) - #IsIn($Tourney, "|") - 1)
/SendAll "*** -============================================================================-   ***"
:checkonloop
If $Var <> ""
/Set $Tourney, "=" & $Name(#Val($Left($Var, 3))) & "=" & $Tourney
/Set $Var, $Right($Var, #Len($Var) - 3)
GoTo CheckOnLoop
EndIf
/Set $Tourney, $Left($Tourney, #IsIn($Tourney, "|") - 1)
:Tloop
/Set $Var, $Tourney
/Set #Entrants, (#Len($Var) - #Len($Replace($Var, "=", ""))) / 2
If #Entrants = 1
/SendAll $Bot & "" & $Replace($Tourney, "=", "") & " has no opponent, and therefore moves on automatically."
/SendAll "*** -============================================================================-   ***"
/SendAll ""
/Exit
EndIf
/Set #X, #Rand(#Entrants, 1)
:Tltwop
/Set #Y, #Rand(#Entrants, 1)
If #X = #Y
GoTo Tltwop
EndIf
/Set #Entrants, 1
:Tlthreep
/Set $Var,$Right($Var, #Len($Var) - 1)
If #X = #Entrants OR #Y = #Entrants
If #X * #Y = 0
/Set $Battles, $Battles & "=" & $Left($Var, #IsIn($Var, "=") - 1) & "=|"
/SendAll "-VS-"
Else
/Set $Battles, $Battles & "|=" & $Left($Var, #IsIn($Var, "=") - 1) & "="
EndIf
/SendAll "[Contestant]:" & $Left($Var, #IsIn($Var, "=") - 1)
/Set $Tourney, $Replace($Tourney, "=" & $Left($Var, #IsIn($Var, "=") - 1) & "=", "")
If #X = #Entrants
/Set #X, 0
Else
/Set #Y, 0
EndIf
EndIf
/Inc #Entrants
/Set $Var, $Right($Var, #Len($Var) - #IsIn($Var, "="))
If #X + #Y > 0
GoTo Tlthreep
EndIf
/SendAll "*** -============================================================================-   ***"
If $Tourney <> ""
GoTo Tloop
EndIf
/Exit
EndIf
EndIf

If $A = "FeatureAdded"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/StopEvent
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A  < 6
/SendPM #Source, $Bot & "You don't have the authority to make any announcements ..."
/Exit
EndIf
If $B = ""
/SendPM #Source, $Bot & "You didn't type in your announcement ..."
/Exit
EndIf
/SendAll ""
/SendAll $Bot & "A new feature was added to Kirby's Casino!"
/SendAll $Bot & $B
/SendAll ""
/Exit
EndIf

If $A = "Poll"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/StopEvent
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A  < 6
/SendPM #Source, $Bot & "You don't have the authority to make any announcements ..."
/Exit
EndIf
If $B = ""
/SendPM #Source, $Bot & "You didn't type in your announcement ..."
/Exit
EndIf
/SendAll ""
/SendAll $Bot & "Attention everyone! Blue Kirby is currently running a poll!"
/SendAll $Bot & $B
/SendAll ""
/Exit
EndIf


If $A = "IncMoney"
If #IsIn($B, " ") > 0
/Set $B, $Left($B, #IsIn($B, " ") - 1)
EndIf
/Set $C, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $C, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 3)
EndIf
If $B = ""
/Exit
EndIf
If $C = ""
/Exit
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A < 6
/SendPM #Source, "Can't use that!"
/Exit
EndIf
If #PNumber($C) = 0
/SendPM #Source, "Player not online."
/Exit
EndIf
/Set #Tar, #PNumber($C)
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + #Val($B)
/SaveValue $GetPlayerInfo(#Tar, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))
/SendPM #Source, "Money increased."
/SendPM #Tar, $Bot & "Money was added to your account! Type /Refresh to get it!"
/Exit
EndIf

If $A = "IncAchievement"
If #IsIn($B, " ") > 0
/Set $B, $Left($B, #IsIn($B, " ") - 1)
EndIf
/Set $C, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $C, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 3)
EndIf
If $B = ""
/Exit
EndIf
If $C = ""
/Exit
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A < 6
/SendPM #Source, "Can't use that!"
/Exit
EndIf
If #PNumber($C) = 0
/SendPM #Source, "Player not online."
/Exit
EndIf
/Set #Tar, #PNumber($C)
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #B, #A + #Val($B)
/SaveValue $GetPlayerInfo(#Tar, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#A), "/" & $Str(#B))
/SendPM #Source, "Money increased."
/SendPM #Tar, $Bot & "Achievement points were added to your account! Type /Refresh to get them!"
/Exit
EndIf

If $A = "AuthCmds"
/StopEvent
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A > 0
/SendPM #Source, ""
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, "***                                                       *** Authority Command List ***                                                        ***"
/SendPM #Source, "!Kick <Name>: Kicks a player off the server."
/SendPM #Source, "!Mute <Name>: Mutes a player. This prevents them from talking in main chat."
/SendPM #Source, "!Demute <Name>: This ends the muting effect for a player."
/SendPM #Source, "!Tourney <Players>: Use this to get a tournament going. Positions available is at your discretion."
If #A > 1
/SendPM #Source, "!Massmute <Auth Level>: Prevents anyone lower than the level specified from talking in main chat."
/SendPM #Source, "!MassDemute: This command ends the mass mute effect."
/SendPM #Source, "!ResetTourney: Use this to reset the current tournament."
EndIf
If #A > 3
/SendPM #Source, "!Ban <Name>: This will ban any given player from Kirby's Casino permanently."
EndIf
If #A > 5
/SendPM #Source, "!ViewValue: This shows the value of a registry key. Returns null if the value isn't present."
/SendPM #Source, "!SaveValue: This will modify any given registry key. Do *NOT* misuse it."
/SendPM #Source, "!FeatureAdded <Sentence>: Use this to make a server-wide announcement of a new feature."
/SendPM #Source, "!IncMoney <Name>: Use this to modify the on-hand money of a respective player."
/SendPM #Source, "!IncAchievement <Name>: Use this to modify the achievement points of a respective player."
EndIf
/SendPM #Source, "*** -============================================================================-   ***"
/SendPM #Source, ""
Else
/SendPM #Source, ""
/SendPM #Source, $Bot & "You are not authorised to view authority commands. Sorry!"
/SendPM #Source, ""
/Unset #A
/Exit
EndIf
/Unset #A
/Exit
EndIf

If $A = "GamesOn"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A < 3
/SendPM #Source, $Bot & "Do not want."
/Exit
EndIf
/Set #KC, 1
/SendAll ""
/SendAll "*** ATTENTION ***"
/SendAll $Bot & "All games are re-enabled again. Enjoy!"
/SendAll ""
/Exit
EndIf

If $A = "GamesOff"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A < 3
/SendPM #Source, $Bot & "Do not want."
/Exit
EndIf
/Set #KC, 0
/SendAll ""
/SendAll "*** ATTENTION ***"
/SendAll $Bot & "The following games have been disabled temporarily: Slots, WoF and Lucky Draw."
/SendAll ""
/Exit
EndIf

If $A = "Kick"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Pnumber($B), PSID) & "_Stats")
/Set #B, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #IsIn($Temp, "Logged In") < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You can't do that unless you're logged in!"
/SendPM #Source, ""
/Exit
EndIf
If #A < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have the authority to do that ..."
/SendPM #Source, ""
/Exit
EndIf
If $B = ""
/SendPM #Source, "*** You must type in the name of the person you want to kick ..."
/Exit
EndIf
If #Pnumber($B) = 0
/SendPM #Source, "*** '" & $B & "' is not online ..."
/Exit
EndIf
/Set #Tar, #PNumber($B)
If #A  <= #B
/SendPM #Source, "*** Your Authority isn't high enough to kick that person, sorry ..."
/Exit
EndIf
/SendAll "*** " & $Name(#Tar) & " was kicked by " & $Name(#Source) & "." 
/Kick #Tar
/Exit
EndIf

If $A = "Ban"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Pnumber($B), PSID) & "_Stats")
/Set #B, 
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #IsIn($Temp, "Logged In") < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You can't do that unless you're logged in!"
/SendPM #Source, ""
/Exit
EndIf
If #A < 3
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have the authority to do that ..."
/SendPM #Source, ""
/Exit
EndIf
If $B = ""
/SendPM #Source, "*** You must type in the name of the person you want to ban ..."
/Exit
EndIf
If #Pnumber($B) = 0
/SendPM #Source, "*** '" & $B & "' is not online ..."
/Exit
EndIf
/Set #Tar, #PNumber($B)
If #Auth(#Source) < 4
/SendPM #Source, "*** Your Authority isn't high enough to ban people ..."
/Exit
EndIf
If #Auth(#Source)  <= #Auth(#Tar)
/SendPM #Source, "*** Your Authority isn't high enough to ban that person, sorry ..."
/Exit
EndIf
/SendAll "*** " & $Name(#Tar) & " was SIDbanned by " & $Name(#Source) & "." 
/Ban #Tar
/SidBan #Tar
/Exit
EndIf

If $Left($Message, 10) = "!MassMute " OR $Left($Message, 10) = "/MassMute "
/Stopevent

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))

If #IsIn($Temp, "Logged In") < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You can't do that unless you're logged in!"
/SendPM #Source, ""
/Exit
EndIf
If #A > 1
/Set #Mutee, #Val($Right($Message, #Len($Message) - 10))
If #Mutee < 1 OR #Mutee > 6
/Sendpm #Source, "*** Auth Level between 1 and 6 only. ***"
Else
/Savevalue "Muteall", "1"
/SaveValue "Muteall_auth", $Right($Message, #Len($Message) - 10)
/Sendall "*** " & $Name(#Source) & " has muted every player up to authority " & $Right($Message, #Len($Message) - 10) & "/6!"
Endif
Endif
/UnSet #Mutee
/Exit
Endif

If $Message = "!Massdemute" OR $Message = "/Massdemute"
/Stopevent
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))

If #IsIn($Temp, "Logged In") < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You can't do that unless you're logged in!"
/SendPM #Source, ""
/Exit
EndIf
If #A > 1
/Savevalue "Muteall", "0"
/SaveValue "Muteall_auth", "0"
/Sendall "*** " & $Name(#Source) & " has ended the mass-mute. ***"
Endif
/Exit
Endif

//MUTE
If $A = "mute" OR $A = "permmute"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Pnumber($B), PSID) & "_Stats")
/Set #B, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #IsIn($Temp, "Logged In") < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You can't do that unless you're logged in!"
/SendPM #Source, ""
/Exit
EndIf
If $B = ""
/SendPM #Source, "*** You must type in the name of the person you want to mute ..."
/Exit
EndIf
/Set #Tar, #PNumber($B)
If #Tar = 0
/SendPM #Source, "*** '" & $B & "' is not currently on the server."
/Exit
EndIf
If #A < 1
/SendPM #Source, "*** Your Authority isn't high enough to mute people ..."
/Exit
EndIf
If #A  <= #B
/SendPM #Source, "*** Your Authority isn't high enough to mute that person, sorry ..."
/Exit
EndIf
//CHECKS FOR NAME IN THE VALUE
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Tar, PSID) & "_Stats", $Replace($Temp, "!" & $Mid($Temp, #IsIn($Temp, "!") + 1, (#IsIn($Temp, "*") - #IsIn($Temp, "!")) - 1), "!1")
/SendAll $Bot & $Name(#Tar) & " has been muted by " & $Name(#Source) & "."
/SendPM #Tar, "*** Although you have been muted, you can still use the commands and battle."
/Exit
EndIf

//DEMUTE
If $A = "demute" OR $A = "unmute"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Pnumber($B), PSID) & "_Stats")
/Set #B, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #IsIn($Temp, "Logged In") < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You can't do that unless you're logged in!"
/SendPM #Source, ""
/Exit
EndIf
If #A < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You don't have the authority to do that ..."
/SendPM #Source, ""
/Exit
EndIf
If $B = ""
/SendPM #Source, "*** You must type in the name of the person you want to demute ..."
/Exit
EndIf
/Set #Tar, #PNumber($B)
If #Tar = 0
/SendPM #Source, "'" & $B & "' is not currently on the server."
/Exit
EndIf
If #A  <= #B
/SendPM #Source, "*** Your Authority isn't high enough to demute that person, sorry ..."
/Exit
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Tar, PSID) & "_Stats", $Replace($Temp, "!" & $Mid($Temp, #IsIn($Temp, "!") + 1, (#IsIn($Temp, "*") - #IsIn($Temp, "!")) - 1), "!0")
/SendAll "*** " & $Name(#Tar) & " has been demuted by " & $Name(#Source) & "."
/Exit
EndIf


If $A = "Auth"
If #IsIn($B, " ") > 0
/Set $B, $Left($B, #IsIn($B, " ") - 1)
EndIf
/Set $C, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $C, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 3)
EndIf
/Set #Tar, #Pnumber($C)
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
/Set #B, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #A < 6 AND $GetPlayerInfo(#Source, PSID) <> "JPEMU8BSJI585HT6O5GUH" AND $GetPlayerInfo(#Source, IPAD) <> "127.0.0.1"
/SendPM #Source, "*** You don't have the authority to use this command! ***"
/Exit
EndIf
:SkipAuthAuth
If $B = ""
/SendPM #Source, "*** You must type in a level of authority to set. The format is '/Auth (1-6) [NAME]'."
/Exit
EndIf
If $C = ""
/SendPM #Source, "*** You forgot to type in the name of your target. The format is '/Auth (1-6) [NAME]'."
/Exit
EndIf
If #Pnumber($C) = 0
/SendPM #Source, "*** " & $C & " is not currently online."
/Exit

EndIf
/Set #Tar, #Pnumber($C)
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
If #B < #Val($B)
/SendPM #Tar, ""
/SendPM #Tar, "*** -============================================================================-   ***"
/SendPM #Tar, "***                                                           *** Authority Change ***                                                              ***"
/SendPM #Tar, $Bot & "Your authority has been set to [" & $Str(#Val($B)) & "/6]."
If #IsIn($Temp, "%Y&") > 1
/SendPM #Tar, $Bot & "Before continuing, you must set yourself a password, or else you won't be able to log in."
/SendPM #Tar, $Bot & "To do so, type !Password <your password>."
EndIf
/SendPM #Tar, "*** -============================================================================-   ***"
/SendPM #Tar, ""
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Tar, PSID) & "_Stats", $Replace($Temp, "*" & $Str(#B) & "%", "*" & $B & "%")
If #Val($B) > 0
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Tar, PSID) & "_Stats", $Temp & "|| Logged In"
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
Else
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")

/SaveValue $GetPlayerInfo(#Tar, PSID) & "_Stats", $Temp & "|| Logged Out"
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
EndIf
If #Val($B) < 2
/SetPlayerInfo #Tar, AUTH, 0
EndIf
If #Val($B) = 2 OR #Val($B) = 3
/SetPlayerInfo #Tar, AUTH, 1
EndIf
If #Val($B) > 3
/SetPlayerInfo #Tar, AUTH, 2
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Tar, PSID) & "_Stats")
/Set $TempA, $Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1)
/Set $TempB, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
/Set $TempC, $Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1)
/Set $TempD, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
/Set $TempE, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
/Set $TempF, $GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")
/Set $TempG, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)
/Set $TempH, $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)
/SetPlayerInfo #Tar, EXTR, "[ Coins: <" & $TempA & "> ] [ Job Level: <" & $TempB & "> ] [ Streak: <" & $TempC & "> ] " & $Chr(10) & "[ Achievements: <" & $TempD & "> ] [ Battle Points: <" & $TempE & "> ]" & $Chr(10) & "[ Guild: <" & $TempF & "> ] [ Rank: <" & $TempG & "/10> ] [ Auth: <" & $TempH & "/6> ]"
/Unset $Temp
/Unset $TempA
/Unset $TempB
/Unset $TempC
/Unset $TempD
/Unset $TempE
/Unset $TempF
/Unset $TempG
/Unset $TempH
/SendPM #Source, $Bot & "You have successfully changed the authority of the player in question."
/Exit
EndIf


If $A = "Password"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #IsIn($Temp, "Logged In") < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "You cannot change your password unless you are already logged in!"
/SendPM #Source, ""
/Exit
EndIf
If #A < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "There's no need for you to set or change a password. You don't have the authority ..."
/SendPM #Source, ""
/Exit
EndIf
/Set $A, $Mid($Temp, #IsIn($Temp, "%") + 1, (#IsIn($Temp, "&") - #IsIn($Temp, "%")) - 1)
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "%" & $A & "&", "%" & $B& "&")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
If #IsIn($Temp, "%" & $B & "&") > 0
/SendPM #Source, ""
/SendPM #Source, $Bot & "Your password has been set to '" & $B & "'."
/SendPM #Source, $Bot & "To change it, log into your authority account and access this command. Thankyou."
/SendPM #Source, ""
EndIf
/Exit
EndIf


If $A = "Identify"
/Set $B, ""
If #Len($Message) > (#Len($B) + #Len($A)) + 2
/Set $B, $Right($Message, #Len($Message) - (#Len($A) + #Len($B)) - 2)
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1))
If #A < 1
/SendPM #Source, ""
/SendPM #Source, $Bot & "There's no need for you to log into any account. You don't have the authority ..."
/SendPM #Source, ""
/Exit
EndIf
If #IsIn($Temp, "%" & $B & "&") > 0
/SendPM #Source, ""
/SendPM #Source, $Bot & "You have successfully logged into your authority position. Thankyou!"
/SendPM #Source, ""
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "Logged Out", "Logged In")
If #A = 2 OR #A = 3
/SetPlayerInfo #Source, AUTH, 1
/Exit
EndIf
If #A > 3
/SetPlayerInfo #Source, AUTH, 2
/Exit
EndIf
/Exit
Else
/SendPM #Source, ""
/SendPM #Source, $Bot & "I'm sorry, that password is incorrect. You have failed to log in."
/SendPM #Source, ""
/Exit
EndIf
/Exit
EndIf


//DO NOT DELETE THIS ENDIF!
/SendPM #Source, ""
/SendPM #Source, $Bot & "The command '" & $Z & $A & "' is invalid. Please check your spelling or consult a Moderator or Administrator."
/SendPM #Source, ""
/Exit
EndIf

/Exit
:NewInfo
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set $TempA, $Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1)
/Set $TempB, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
/Set $TempC, $Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1)
/Set $TempD, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
/Set $TempE, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
/Set $TempF, $GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")
/Set $TempG, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)
/Set $TempH, $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)
/SetPlayerInfo #Source, EXTR, "[ Coins: <" & $TempA & "> ] [ Job Level: <" & $TempB & "> ] [ Streak: <" & $TempC & "> ] " & $Chr(10) & "[ Achievements: <" & $TempD & "> ] [ Battle Points: <" & $TempE & "> ]" & $Chr(10) & "[ Guild: <" & $TempF & "> ] [ Rank: <" & $TempG & "/10> ] [ Auth: <" & $TempH & "/6> ]"
/Unset $Temp
/Unset $TempA
/Unset $TempB
/Unset $TempC
/Unset $TempD
/Unset $TempE
/Unset $TempF
/Unset $TempG
/Unset $TempH

EndEvent

Event -ChallengeIssued

If #IsIn($Tourney, "=" & $Name(#Target) & "=") > 0
/SendPM #Source, $Bot & " As your opponent is in the tournament, he/she can't battle anyone until pairings have been done for them!"
/StopEvent
/Exit
EndIf
If #IsIn($Tourney, "=" & $Name(#Source) & "=") > 0
/SendPM #Source, $Bot & " As you are in the tournament, you can't challenge anyone until pairings have been done for you!"
/StopEvent
/Exit
EndIf

If #IsIn($Battles, "=" & $Name(#Source) & "=") > 0
If #IsIn($Battles, "|=" & $Name(#Source) & "=") > 0
/Set $Var, $Right($Battles, #Len($Battles) - #IsIn($Battles, "|=" & $Name(#Source) & "=") - 3 - #Len($Name(#Source)))
/Set $Var, $Left($Var, #IsIn($Var, "|") - 2)
If $Name(#Target) <> $Var
/SendPM #Source, $Bot & " You must challenge " & $Var & "!"
GoTo TSFinishBad
EndIf
Else
/Set $Var, $Left($Battles, #IsIn($Battles, "==" & $Name(#Source) & "=|") - 1)
:Tloop
/Set $Var, $Right($Var, #Len($Var) - #IsIn($Var, "|=") - 1)
If #IsIn($Var, "=") > 0
GoTo Tloop
EndIf
If $Name(#Target) <> $Var
/SendPM #Source, $Bot & " You must challenge " & $Var & "!"
GoTo TSFinishBad
EndIf
EndIf
If #GetTeamPoke(#Source, 1) = #GetTeamPoke(#Source, 2) OR #GetTeamPoke(#Source, 1) = #GetTeamPoke(#Source, 3) OR #GetTeamPoke(#Source, 1) = #GetTeamPoke(#Source, 4) OR #GetTeamPoke(#Source, 1) = #GetTeamPoke(#Source, 5) OR #GetTeamPoke(#Source, 1) = #GetTeamPoke(#Source, 6) OR #GetTeamPoke(#Source, 2) = #GetTeamPoke(#Source, 3) OR #GetTeamPoke(#Source, 2) = #GetTeamPoke(#Source, 4) OR #GetTeamPoke(#Source, 2) = #GetTeamPoke(#Source, 5) OR #GetTeamPoke(#Source, 2) = #GetTeamPoke(#Source, 6) OR #GetTeamPoke(#Source, 3) = #GetTeamPoke(#Source, 4) OR #GetTeamPoke(#Source, 3) = #GetTeamPoke(#Source, 5) OR #GetTeamPoke(#Source, 3) = #GetTeamPoke(#Source, 6) OR #GetTeamPoke(#Source, 4) = #GetTeamPoke(#Source, 5) OR #GetTeamPoke(#Source, 4) = #GetTeamPoke(#Source, 6) OR #GetTeamPoke(#Source, 5) = #GetTeamPoke(#Source, 6)

/SendPM #Source, $Bot & " You can't have two duplicate Pokemon on your team for a tournament battle!"
GoTo TSFinishBad
EndIf
If #GetTeamPoke(#Target, 1) = #GetTeamPoke(#Target, 2) OR #GetTeamPoke(#Target, 1) = #GetTeamPoke(#Target, 3) OR #GetTeamPoke(#Target, 1) = #GetTeamPoke(#Target, 4) OR #GetTeamPoke(#Target, 1) = #GetTeamPoke(#Target, 5) OR #GetTeamPoke(#Target, 1) = #GetTeamPoke(#Target, 6) OR #GetTeamPoke(#Target, 2) = #GetTeamPoke(#Target, 3) OR #GetTeamPoke(#Target, 2) = #GetTeamPoke(#Target, 4) OR #GetTeamPoke(#Target, 2) = #GetTeamPoke(#Target, 5) OR #GetTeamPoke(#Target, 2) = #GetTeamPoke(#Target, 6) OR #GetTeamPoke(#Target, 3) = #GetTeamPoke(#Target, 4) OR #GetTeamPoke(#Target, 3) = #GetTeamPoke(#Target, 5) OR #GetTeamPoke(#Target, 3) = #GetTeamPoke(#Target, 6) OR #GetTeamPoke(#Target, 4) = #GetTeamPoke(#Target, 5) OR #GetTeamPoke(#Target, 4) = #GetTeamPoke(#Target, 6) OR #GetTeamPoke(#Target, 5) = #GetTeamPoke(#Target, 6)
/SendPM #Source, $Bot & " Your opponent can't have two duplicate Pokemon on their team for a tournament battle!"
GoTo TSFinishBad
EndIf

If $Mid($Message, 7, 1) = "1"
/SendPM #Source, $Bot & " No Level Balance is allowed in tournaments. If you're in a Challenge Cup tourney, Level Balance is automatically enabled upon starting the battle."
GoTo TSFinishBad
EndIf
If #TType = 6 
If  $Mid($Message, 6, 1) = "0"
/SendPM #Source, $Bot & " This is a Challenge cup tournament, enable Challenge cup and battle your opponent."
GoTo TSFinishBad
Else
GoTo TSFinishOK
EndIf
EndIf
If $Mid($Message, 6, 1) = "1"
/SendPM #Source, $Bot & " This is not a Challenge cup tournament, disable the Challenge Cup option and battle your opponent."
GoTo TSFinishBad
EndIf
If #GetCompat(#Source) = 1 OR #GetCompat(#Source) = 3
If #TType <> 7
/SendPM #Source, $Bot & " Please don't set the version to G/S/C, you're not in a G/S/C tournament."
GoTo TSFinishBad
Else
GoTo TSFinishOK
EndIf
EndIf
If #GetCompat(#Source) = 0 OR #GetCompat(#Source) = 2
If #TType <> 8
/SendPM #Source, $Bot & " Please don't set the version to R/B/Y, you're not in a R/B/Y tournament."
GoTo TSFinishBad
Else
GoTo TSFinishOK
EndIf
EndIf
If #TType = 1
GoTo TSFinishOK
EndIf
If #HasPoKe(#Target, 150) = 1 OR #HasPoKe(#Target, 151) = 1 OR #HasPoKe(#Target, 249) = 1 OR #HasPoKe(#Target, 250) = 1 OR #HasPoKe(#Target, 380) = 1 OR #HasPoKe(#Target, 381) = 1 OR #HasPoKe(#Target, 382) = 1 OR #HasPoKe(#Target, 383) = 1 OR #HasPoKe(#Target, 384) = 1 OR #HasPoKe(#Target, 386) = 1
/SendPM #Source, $Bot & " Your opponent must not have Ubers in their team for this match."
GoTo TSFinishBad
EndIf
If #HasPoKe(#Source, 150) = 1 OR #HasPoKe(#Source, 151) = 1 OR #HasPoKe(#Source, 249) = 1 OR #HasPoKe(#Source, 250) = 1 OR #HasPoKe(#Source, 380) = 1 OR #HasPoKe(#Source, 381) = 1 OR #HasPoKe(#Source, 382) = 1 OR #HasPoKe(#Source, 383) = 1 OR #HasPoKe(#Source, 384) = 1 OR #HasPoKe(#Source, 386) = 1
/SendPM #Source, $Bot & " You must not have Ubers in your team for this match."
GoTo TSFinishBad
EndIf
If #TType = 2
GoTo TSFinishOk
EndIf
/Set $Var, ",142,65,144,257,242,286,251,113,6,344,85,232,149,51,356,244,196,103,330,205,282,94,130,214,385,135,230,272,82,105,308,376,350,241,146,291,243,378,377,379,112,373,254,227,289,235,143,121,245,260,128,248,197,134,3,110,145,"
If #TType >= 4 
/Set $Var, $Var & "359,306,334,181,24,59,184,354,9,323,36,346,206,125,101,295,22,160,162,203,207,55,76,368,210,326,297,106,237,97,141,115,171,131,264,337,126,310,226,154,200,122,89,34,31,38,224,139,53,25,127,62,57,195,211,26,78,302,28,123,319,292,275,199,215,338,234,73,176,71,45,365,178,193,348,91,169,229,189,124,68,233,212,80,208,277,157,217,335,"
If #TType = 5 
/Set $Var, $Var & "190,168,267,15,182,12,332,351,358,222,342,301,225,87,132,269,83,136,362,107,367,314,352,99,166,108,370,219,284,303,262,312,198,164,299,47,279,18,221,311,186,20,369,315,119,336,213,327,185,192,317,114,324,328,357,201,49,313,321,340,40"
EndIf
EndIf
If #ISIN($Var, "," & $Str(#GetTeamPoke(#Source, 1)) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Source, 2)) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Source, 3)) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Source, 4)) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Source, 5)) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Source, 6)) & ",") > 0
/SendPM #Source, $Bot & " One of your Pokemon doesn't match the tournament type. Check your team."
GoTo TSFinishBad
EndIf
If #ISIN($Var, "," & $Str(#GetTeamPoke(#Target, 1) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Target, 2) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Target, 3) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Target, 4) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Target, 5) & ",") > 0 OR #ISIN($Var, "," & $Str(#GetTeamPoke(#Target, 6) & ",") > 0
/SendPM #Source, $Bot & " One of your opponent's Pokemon doesn't match the tournament type. Get your opponent to verify their team."
GoTo TSFinishBad
EndIf
GoTo TSFinishOk
Else
If #IsIn($Battles, "=" & $Name(#Target) & "=") > 0
/SendPM #Source, $Bot & " The person you challenged is in the tournament! You're not, so you can't battle them!"
:TSFinishBad
/StopEvent
/Exit
EndIf
EndIf

If $Mid($Message, 1, 1) = "0"
/SendPM #Source, ""
/SendPM #Source, $Bot & "When battling here, Sleep Clause must be enabled."
/SendPM #Source, ""
/StopEvent
/Exit
EndIf

If $Mid($Message, 8, 1) = "0"
/SendPM #Source, ""
/SendPM #Source, $Bot & "When battling here, Sleep Clause must be enabled."
/SendPM #Source, ""
/StopEvent
/Exit
EndIf

If $Mid($Message, 6, 1) = "1"
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_Stats"), "CC: Off") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_Stats"), "CC: Off") > 0
/SendPM #Source, ""
/SendPM #Source, $Bot & "Either you or your opponent has disabled Challenge Cup. Both of you need it enabled to play Challenge Cup battles."
/SendPM #Source, $Bot & "Type !CCOn to allow the Challenge Cup clause to be enabled in challenges, and tell your opponent to do the same."
/SendPM #Source, ""
/StopEvent
/Exit
EndIf
EndIf

If $Mid($Message, 6, 1) <> "1"
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Source, 1)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Source, 1)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Source, 2)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Source, 2)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Source, 3)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Source, 3)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Source, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Source, 4)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Source, 5)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Source, 5)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Source, 6)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Source, 6)) & "."
/Exit
EndIf

If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Target, 1)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Target, 1)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Target, 2)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Target, 2)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Target, 3)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Target, 3)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Target, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Target, 4)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Target, 5)) & "/") > 0
/StopEvent


/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Target, 5)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CPokes"), $Str(#GetTeamPoke(#Target, 6)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the Pokemon " & $Pokemon(#GetTeamPoke(#Target, 6)) & "."
/Exit
EndIf

If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 1, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 1, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 1, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 1, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "You are using a move your opponent has claused on " & $Pokemon(#GetTeamPoke(#Source, 1)) & "."
/SendPM #Source, $Bot & "You should check with them on which move they have claused on that Pokemon that prevented this challenge."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 2, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 2, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 2, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 2, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "You are using a move your opponent has claused on " & $Pokemon(#GetTeamPoke(#Source, 2)) & "."
/SendPM #Source, $Bot & "You should check with them on which move they have claused on that Pokemon that prevented this challenge."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 3, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 3, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 3, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 3, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "You are using a move your opponent has claused on " & $Pokemon(#GetTeamPoke(#Source, 3)) & "."
/SendPM #Source, $Bot & "You should check with them on which move they have claused on that Pokemon that prevented this challenge."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 4, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 4, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 4, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 4, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "You are using a move your opponent has claused on " & $Pokemon(#GetTeamPoke(#Source, 4)) & "."
/SendPM #Source, $Bot & "You should check with them on which move they have claused on that Pokemon that prevented this challenge."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 5, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 5, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 5, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 5, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "You are using a move your opponent has claused on " & $Pokemon(#GetTeamPoke(#Source, 5)) & "."
/SendPM #Source, $Bot & "You should check with them on which move they have claused on that Pokemon that prevented this challenge."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 6, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 6, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 6, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CMoves"), $Str(#GetPokeMove(#Source, 6, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "You are using a move your opponent has claused on " & $Pokemon(#GetTeamPoke(#Source, 6)) & "."
/SendPM #Source, $Bot & "You should check with them on which move they have claused on that Pokemon that prevented this challenge."
/Exit
EndIf

If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 1, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 1, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 1, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 1, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using a move you claused on their " & $Pokemon(#GetTeamPoke(#Target, 6)) & "."
/SendPM #Source, $Bot & "You should check with them on which move it is you don't want to face that they are using."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 2, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 2, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 2, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 2, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using a move you claused on their " & $Pokemon(#GetTeamPoke(#Target, 6)) & "."
/SendPM #Source, $Bot & "You should check with them on which move it is you don't want to face that they are using."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 3, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 3, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 3, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 3, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using a move you claused on their " & $Pokemon(#GetTeamPoke(#Target, 6)) & "."
/SendPM #Source, $Bot & "You should check with them on which move it is you don't want to face that they are using."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 4, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 4, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 4, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 4, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using a move you claused on their " & $Pokemon(#GetTeamPoke(#Target, 6)) & "."
/SendPM #Source, $Bot & "You should check with them on which move it is you don't want to face that they are using."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 5, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 5, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 5, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 5, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using a move you claused on their " & $Pokemon(#GetTeamPoke(#Target, 6)) & "."
/SendPM #Source, $Bot & "You should check with them on which move it is you don't want to face that they are using."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 6, 1)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 6, 2)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 6, 3)) & "/") > 0 OR #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CMoves"), $Str(#GetPokeMove(#Target, 6, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using a move you claused on their " & $Pokemon(#GetTeamPoke(#Target, 6)) & "."
/SendPM #Source, $Bot & "You should check with them on which move it is you don't want to face that they are using."
/Exit
EndIf

If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CItems"), $Str(#GetPokeItem(#Source, 1)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the item " & $Item(#GetPokeItem(#Source, 1)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CItems"), $Str(#GetPokeItem(#Source, 2)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the item " & $Item(#GetPokeItem(#Source, 2)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CItems"), $Str(#GetPokeItem(#Source, 3)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the item " & $Item(#GetPokeItem(#Source, 3)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CItems"), $Str(#GetPokeItem(#Source, 4)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the item " & $Item(#GetPokeItem(#Source, 4)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CItems"), $Str(#GetPokeItem(#Source, 5)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the item " & $Item(#GetPokeItem(#Source, 5)) & "."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Target, PSID) & "_CItems"), $Str(#GetPokeItem(#Source, 6)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent has claused the item " & $Item(#GetPokeItem(#Source, 6)) & "."
/Exit
EndIf

If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CItems"), $Str(#GetPokeItem(#Target, 1)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using the item " & $Item(#GetPokeItem(#Target, 1)) & ", which you have claused."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CItems"), $Str(#GetPokeItem(#Target, 2)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using the item " & $Item(#GetPokeItem(#Target, 2)) & ", which you have claused."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CItems"), $Str(#GetPokeItem(#Target, 3)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using the item " & $Item(#GetPokeItem(#Target, 3)) & ", which you have claused."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CItems"), $Str(#GetPokeItem(#Target, 4)) & "/") > 0
/StopEvent

/SendPM #Source, $Bot & "Your opponent is using the item " & $Item(#GetPokeItem(#Target, 4)) & ", which you have claused."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CItems"), $Str(#GetPokeItem(#Target, 5)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using the item " & $Item(#GetPokeItem(#Target, 5)) & ", which you have claused."
/Exit
EndIf
If #IsIn($GetValue($GetPlayerInfo(#Source, PSID) & "_CItems"), $Str(#GetPokeItem(#Target, 6)) & "/") > 0
/StopEvent
/SendPM #Source, $Bot & "Your opponent is using the item " & $Item(#GetPokeItem(#Target, 6)) & ", which you have claused."
/Exit
EndIf

:TSFinishOK

//DO NOT DELETE
EndIf

EndEvent

Event -BattleOver

If #IsLoaded(#Source) = 0 AND #IsLoaded(#Target) = 0
/Exit
EndIf

If #IsIn($Battles, "=" & $Name(#Source) & "=") * #IsIn($Battles, "=" & $Name(#Target) & "=") > 0
If $Left($Message, 3) = "TIE"
/SendAll ""
/SendAll "*** -============================================================================-   ***"
/SendAll "***                                                            *** Tournament Progress ***                                                      ***"
/SendAll $Bot & " As the battle of " & $Name(#Source) & " and " & $Name(#Target) & " ended in a tie, they must have a rematch to continue the tournament!"
/SendAll "*** -============================================================================-   ***"
/SendAll ""
/Exit
EndIf
If #IsLoaded(#Target) = 0
/sendall ""
/SendAll "*** -============================================================================-   ***"
/SendAll "***                                                            *** Tournament Progress ***                                                      ***"
/sendall $Bot & "" & $Name(#Source) & " has won their battle, but their opponent is no longer present ..."
/SendAll $Bot & "In order to preserve the tournament standings, their opponent should be disqualified."
/SendAll "*** -============================================================================-   ***"
/Exit
EndIf
/Set $Battles, $Replace($Replace($Battles, "=" & $Name(#Source) & "=", ""), "=" & $Name(#Target) & "=", "")
/Set $Tourney, $Tourney & "=" & $Name(#Source) & "="
/sendall ""
/SendAll "*** -============================================================================-   ***"
/SendAll "***                                                            *** Tournament Progress ***                                                      ***"
/sendall $Bot & "" & $Name(#Source) & " has won their round and advanced forward!"
/SendAll $Bot & "" & $Name(#Target) & ", consequently, leaves the tournament with our commisserations."
/SendAll "*** -============================================================================-   ***"
If #IsIn($Battles, "=") > 0
/Exit
EndIf
/Set $Battles, ""
If $Tourney = "=" & $Name(#Source) & "="
/Set $Tourney, ""
/Set #X, #TType

If #X = 1
/SendAll $Bot & "" & $Name(#Source) & " just won the Uber Tournament!"
Else
If #X = 2
/SendAll $Bot & "" & $Name(#Source) & " just won the Over Used Tournament!"
Else
If #X = 3
/SendAll $Bot & "" & $Name(#Source) & " just won the Under Used Tournament!"
Else
If #X = 4
/SendAll $Bot & "" & $Name(#Source) & " just won the Never Used Tournament!"
Else
If #X = 5
/SendAll $Bot & "" & $Name(#Source) & " just won the Un-Evolved Tournament!"
Else
If #X = 6
/SendAll $Bot & "" & $Name(#Source) & " just won the Challenge Cup Tournament!"
Else
If #X = 7
/SendAll $Bot & "" & $Name(#Source) & " just won the Gold/Silver/Crystal Tournament!"
Else
/SendAll $Bot & "" & $Name(#Source) & " just won the Red/Blue/Yellow Tournament!"
EndIf
EndIf
EndIf
EndIf
EndIf
EndIf
EndIf
/SendAll $Bot & $Name(#Target) & " came runner up, they put up a great fight!"
/SendAll "*** -============================================================================-   ***"

/Set #TempA, #PPlz * 150
/SendPM #Source, $Bot & "We congratulate you on your impressive tournament victory."
/SendPM #Source, $Bot & "REWARD - " & $Str(#TempA) & " Coins"
/SendPM #Source, $Bot & "REWARD - " & $Str(#TempA) & " Achievement Points"

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")

/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + #TempA
If #B > 999999
/Set #B, 999999
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")

/Set #A, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))

/Set #B, #A + #TempA
If #B > 999999
/Set #B, 999999
EndIf
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#A), "/" & $Str(#B))
/SendPM #Source, "*** -============================================================================-   ***"
/Set #TempA, #PPlz * 100
/SendPM #Target, $Bot & "Commisserations on your loss, but congratulations on making it to the tournament finals!"
/SendPM #Target, $Bot & "REWARD - " & $Str(#TempA) & " Coins"
/SendPM #Target, $Bot & "REWARD - " & $Str(#TempA) & " Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Target, PSID) & "_Stats")

/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, #A + #TempA
If #B > 999999
/Set #B, 999999
EndIf
/SaveValue $GetPlayerInfo(#Target, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A), "$" & $Str(#B))

/Set $Temp, $GetValue($GetPlayerInfo(#Target, PSID) & "_Stats")

/Set #A, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #B, #A + #TempA
If #B > 999999
/Set #B, 999999
EndIf
/SaveValue $GetPlayerInfo(#Target, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#A), "/" & $Str(#B))
/SendPM #Target, "*** -============================================================================-   ***"
/SendAll ""
Goto SkipRank
/Exit
EndIf
/SendAll $Bot & " Battles for the current round have just finished!"
/SendAll "*** -============================================================================-   ***"
:Tloop
/Set $Var, $Tourney
/Set #Entrants, (#Len($Var) - #Len($Replace($Var, "=", "")))/2
If #Entrants = 1
/SendAll $Bot & "" & $Replace($Tourney, "=", "") & " has no opponent, and therefore moves to the next round!"
/SendAll "*** -============================================================================-   ***"
/SendAll ""
/Exit
EndIf
/Set #X, #Rand(#Entrants, 1)
:Tltwop
/Set #Y, #Rand(#Entrants, 1)
If #X = #Y
GoTo Tltwop
EndIf
/Set #Entrants, 1
:Tlthreep
/Set $Var,$Right($Var, #Len($Var) - 1)
If #X = #Entrants OR #Y = #Entrants
If #X * #Y = 0
/Set $Battles, $Battles & "=" & $Left($Var, #IsIn($Var, "=") - 1) & "=|"
/SendAll "-VS-"
Else
/Set $Battles, $Battles & "|=" & $Left($Var, #IsIn($Var, "=") - 1) & "="

EndIf
/SendAll "[Contestant]:" & $Left($Var, #IsIn($Var, "=") - 1)
/Set $Tourney, $Replace($Tourney, "=" & $Left($Var, #IsIn($Var, "=") - 1) & "=", "")
If #X = #Entrants
/Set #X, 0
Else
/Set #Y, 0
EndIf
EndIf
/Inc #Entrants
/Set $Var, $Right($Var, #Len($Var) - #IsIn($Var, "="))
If #X + #Y > 0
GoTo Tlthreep
EndIf
If $Tourney <> ""
GoTo Tloop
EndIf
/SendAll "*** -============================================================================-   ***"
EndIf


If #IsIn($Message, WIN) > 0 OR #IsIn($Message, FOR) > 0
If #IsLoaded(#Source) > 0
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #Temp + 1
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "\" & $Str(#Temp), "\" & $Str(#TempB))
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Inc #Temp

If #Temp = 2
/SendAll $Bot & "Double win! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 50 Achievement Points"
/Set #TempB, #TempA + 50
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 3
/SendAll $Bot & "Triple win! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 75 Achievement Points"
/Set #TempB, #TempA + 75
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 5
/SendAll $Bot & "Winning spree! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 150 Achievement Points"
/Set #TempB, #TempA + 150
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 10
/SendAll $Bot & "Winning frenzy! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 250 Achievement Points"
/Set #TempB, #TempA + 250
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 15
/SendAll $Bot & "Overstreak! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 400 Achievement Points"
/Set #TempB, #TempA + 400
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 20
/SendAll $Bot & "Running riot! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 550 Achievement Points"
/Set #TempB, #TempA + 550
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 25
/SendAll $Bot & "Rampage! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 750 Achievement Points"
/Set #TempB, #TempA + 750
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 30
/SendAll $Bot & "Streaktacular! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 1000 Achievement Points"
/Set #TempB, #TempA + 1000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 40
/SendAll $Bot & "Streakatrocity! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 1500 Achievement Points"
/Set #TempB, #TempA + 1500
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 50
/SendAll $Bot & "Streakatastrophe! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 2000 Achievement Points"
/Set #TempB, #TempA + 2000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 60
/SendAll $Bot & "Streakapocalypse! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 3000 Achievement Points"
/Set #TempB, #TempA + 3000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 70
/SendAll $Bot & "Untouchable! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 4000 Achievement Points"
/Set #TempB, #TempA + 4000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 85
/SendAll $Bot & "Invincible! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 6000 Achievement Points"
/Set #TempB, #TempA + 6000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf
If #Temp = 100
/SendAll $Bot & "Winnionaire! " & $Name(#Source) & " is undefeated after " & $Str(#Temp) & " consecutive battles!"
/SendPM #Source, $Bot & "REWARD - 10000 Achievement Points"
/Set #TempB, #TempA + 10000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf

EndIf

If #IsLoaded(#Target) > 0

/Set $Temp, $GetValue($GetPlayerInfo(#Target, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/SaveValue $GetPlayerInfo(#Target, PSID) & "_Stats", $Replace($Temp, "\" & $Str(#Temp), "\0")

If #Temp > 3
/SendAll $Bot & "After a run of " & $Str(#Temp) & " consecutive wins, " & $Name(#Target) & "'s streak was broken by " & $Name(#Source) & "!"
/Set #TempB, (#Temp*25)
/SendPM #Source, $Bot & "REWARD - "& $Str(#TempB) & " Achievement Points"
/Set #TempB, #TempA + (#Temp*25)
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
EndIf

EndIf

If #IsLoaded(#Source) > 0 AND #IsLoaded(#Target) > 0

/Set $TempY, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set $TempZ, $GetValue($GetPlayerInfo(#Target, PSID) & "_Stats")
/Set $TempY, $Mid($TempY, #IsIn($TempY, "X") + 1, (#IsIn($TempY, "@") - #IsIn($TempY, "X")) - 1)
/Set $TempZ, $Mid($TempZ, #IsIn($TempZ, "X") + 1, (#IsIn($TempZ, "@") - #IsIn($TempZ, "X")) - 1)

If $TempY <> $TempZ

/Set $Temp, $GetValue($GetPlayerInfo(#Target, PSID) & "_Stats")
/Set #TempB, #Int((#Val($Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)) / 10) + 20)
If #Val($TempZ) < 1
Goto SkipOne
EndIf
If #Val($TempZ) = 1
/SaveValue "__CycloneLosses", #GetValue("__CycloneLosses") + 1
EndIf
If #Val($TempZ) = 2
/SaveValue "__EruptionLosses", #GetValue("__EruptionLosses") + 1
EndIf
If #Val($TempZ) = 3
/SaveValue "__TsunamiLosses", #GetValue("__TsunamiLosses") + 1
EndIf
:SkipOne
If #TempB > 150
/Set #TempB, 150
EndIf

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1))
/SendPM #Source, $Bot & "For your victory against a player outside your organisation, you have earned " & $Str(#TempB) & " Battle Points!"
If #Val($TempY) < 1
Goto SkipTwo
EndIf
If #Val($TempY) = 1
/SaveValue "__CycloneWins", #GetValue("__CycloneWins") + 1
/SaveValue "__CyclonePoints", #GetValue("__CyclonePoints") + #TempB
EndIf
If #Val($TempY) = 2
/SaveValue "__EruptionWins", #GetValue("__EruptionWins") + 1
/SaveValue "__EruptionPoints", #GetValue("__EruptionPoints") + #TempB
EndIf
If #Val($TempY) = 3
/SaveValue "__TsunamiWins", #GetValue("__TsunamiWins") + 1
/SaveValue "__TsunamiPoints", #GetValue("__TsunamiPoints") + #TempB
EndIf
:SkipTwo
/Set #TempB, #Int(#Temp + #TempB)
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1) & "\", $Str(#TempB) & "\")
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set $TempY, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
/Set $TempZ, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)

If #Val($TempY) > 3599 AND #Val($TempZ) < 10
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "10#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 10!"
/SendPM #Source, "REWARD - 10000 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 10000
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf
If #Val($TempY) > 2999 AND #Val($TempZ) < 9
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "9#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 9!"
/SendPM #Source, "REWARD - 6400 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 7200
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf
If #Val($TempY) > 2449 AND #Val($TempZ) < 8
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "8#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 8!"
/SendPM #Source, "REWARD - 4800 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 4800
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf
If #Val($TempY) > 1949 AND #Val($TempZ) < 7
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "7#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 7!"
/SendPM #Source, "REWARD - 3200 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 3200
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf
If #Val($TempY) > 1499 AND #Val($TempZ) < 6
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "6#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 6!"
/SendPM #Source, "REWARD - 1600 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 1600
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf
If #Val($TempY) > 1099 AND #Val($TempZ) < 5
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "5#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 5!"
/SendPM #Source, "REWARD - 800 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 800
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf
If #Val($TempY) > 749 AND #Val($TempZ) < 4
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "4#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 4!"
/SendPM #Source, "REWARD - 400 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 400
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf
If #Val($TempY) > 449 AND #Val($TempZ) < 3
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "3#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 3!"
/SendPM #Source, "REWARD - 100 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 200
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf
If #Val($TempY) > 199 AND #Val($TempZ) < 2
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, $TempZ & "#", "2#")
/SendAll $Bot & "As a result of their battle, " & $Name(#Source) & " increased their Guild Rank! It is now Level 2!"
/SendPM #Source, "REWARD - 100 Achievement Points"
/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set #Temp, #Val($Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1))
/Set #TempA, #Val($Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1))
/Set #TempB, #TempA + 100
/SaveValue $GetPlayerInfo(#Source, PSID) & "_Stats", $Replace($Temp, "/" & $Str(#TempA), "/" & $Str(#TempB))
Goto SkipRank
EndIf

EndIf

EndIf

:SkipRank

If #IsLoaded(#Source) > 0

/Set $Temp, $GetValue($GetPlayerInfo(#Source, PSID) & "_Stats")
/Set $TempA, $Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1)
/Set $TempB, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
/Set $TempC, $Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1)
/Set $TempD, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
/Set $TempE, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
/Set $TempF, $GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")
/Set $TempG, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)
/Set $TempH, $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)
/SetPlayerInfo #Source, EXTR, "[ Coins: <" & $TempA & "> ] [ Job Level: <" & $TempB & "> ] [ Streak: <" & $TempC & "> ] " & $Chr(10) & "[ Achievements: <" & $TempD & "> ] [ Battle Points: <" & $TempE & "> ]" & $Chr(10) & "[ Guild: <" & $TempF & "> ] [ Rank: <" & $TempG & "/10> ] [ Auth: <" & $TempH & "/6> ]"
/Unset $Temp
/Unset $TempA
/Unset $TempB
/Unset $TempC
/Unset $TempD
/Unset $TempE
/Unset $TempF
/Unset $TempG
/Unset $TempH

EndIf

If #IsLoaded(#Target) > 0

/Set $Temp, $GetValue($GetPlayerInfo(#Target, PSID) & "_Stats")
/Set $TempA, $Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1)
/Set $TempB, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
/Set $TempC, $Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1)
/Set $TempD, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
/Set $TempE, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
/Set $TempF, $GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")
/Set $TempG, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)
/Set $TempH, $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)
/SetPlayerInfo #Target, EXTR, "[ Coins: <" & $TempA & "> ] [ Job Level: <" & $TempB & "> ] [ Streak: <" & $TempC & "> ] " & $Chr(10) & "[ Achievements: <" & $TempD & "> ] [ Battle Points: <" & $TempE & "> ]" & $Chr(10) & "[ Guild: <" & $TempF & "> ] [ Rank: <" & $TempG & "/10> ] [ Auth: <" & $TempH & "/6> ]"
/Unset $Temp
/Unset $TempA
/Unset $TempB
/Unset $TempC
/Unset $TempD
/Unset $TempE
/Unset $TempF
/Unset $TempG
/Unset $TempH

EndIf

EndIf

EndEvent

Event Timer 304
/SendAll ""
/SendAll "*** -============================================================================-   ***"
/SendAll "*** ADDRESSES TO REMEMBER ***"
/SendAll $Bot & "Server Advanced Connect - " & $Adv & " (in case the registry goes down)"
/SendAll $Bot & "Official Forums - http://kirbyscasino.ipbfree.com"
/SendAll "*** -============================================================================-   ***"
/SendAll ""
EndEvent

Event Timer 600
/set #temp, 0
:bankloop
If #temp < 200
/set #temp, #temp + 1
If #isloaded(#temp) = 0
goto bankloop
else
/Set $Temp, $GetValue($GetPlayerInfo(#Temp, PSID) & "_Stats")
/Set #A, #Val($Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1))
/Set #B, (#Val($Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1))*90)
/Set #C, #A + #B
If #B < 1
goto bankloop
EndIf
If #C > 999999
/Set #C, 999999
EndIf
/Set $Temp, $GetValue($GetPlayerInfo(#Temp, PSID) & "_Stats")
/SaveValue $GetPlayerInfo(#Temp, PSID) & "_Stats", $Replace($Temp, "$" & $Str(#A) & "/", "$" & $Str(#C) & "/")
/Set $Temp, $GetValue($GetPlayerInfo(#Temp, PSID) & "_Stats")
/SendPM #Temp, $Bot & "Your salary of " & $Str(#B) &" coins has just arrived!"
/Set $Temp, $GetValue($GetPlayerInfo(#Temp, PSID) & "_Stats")
/Set $TempA, $Mid($Temp, #IsIn($Temp, "$") + 1, (#IsIn($Temp, "/") - #IsIn($Temp, "$")) - 1)
/Set $TempB, $Mid($Temp, #IsIn($Temp, "#") + 1, (#IsIn($Temp, "!") - #IsIn($Temp, "#")) - 1)
/Set $TempC, $Mid($Temp, #IsIn($Temp, "\") + 1, (#IsIn($Temp, "X") - #IsIn($Temp, "\")) - 1)
/Set $TempD, $Mid($Temp, #IsIn($Temp, "/") + 1, (#IsIn($Temp, "|") - #IsIn($Temp, "/")) - 1)
/Set $TempE, $Mid($Temp, #IsIn($Temp, "|") + 1, (#IsIn($Temp, "\") - #IsIn($Temp, "|")) - 1)
/Set $TempF, $GetValue("__Clan_" & $Mid($Temp, #IsIn($Temp, "X") + 1, (#IsIn($Temp, "@") - #IsIn($Temp, "X")) - 1) & "_Name")
/Set $TempG, $Mid($Temp, #IsIn($Temp, "@") + 1, (#IsIn($Temp, "#") - #IsIn($Temp, "@")) - 1)
/Set $TempH, $Mid($Temp, #IsIn($Temp, "*") + 1, (#IsIn($Temp, "%") - #IsIn($Temp, "*")) - 1)
/SetPlayerInfo #Temp, EXTR, "[ Coins: <" & $TempA & "> ] [ Job Level: <" & $TempB & "> ] [ Streak: <" & $TempC & "> ] " & $Chr(10) & "[ Achievements: <" & $TempD & "> ] [ Battle Points: <" & $TempE & "> ]" & $Chr(10) & "[ Guild: <" & $TempF & "> ] [ Rank: <" & $TempG & "/10> ] [ Auth: <" & $TempH & "/6> ]"
/Unset $TempA
/Unset $TempB
/Unset $TempC
/Unset $TempD
/Unset $TempE
/Unset $TempF
/Unset $TempG
/Unset $TempH
goto bankloop
EndIf
EndIf
/exit
EndEvent

